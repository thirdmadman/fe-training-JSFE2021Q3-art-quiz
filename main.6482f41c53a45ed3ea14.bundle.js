!function(){"use strict";var e={};function t(e){return t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t(e)}function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,o(r.key),r)}}function r(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e){var n=function(e,n){if("object"!==t(e)||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var o=r.call(e,n||"default");if("object"!==t(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}(e,"string");return"symbol"===t(n)?n:String(n)}e.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),function(){var t;e.g.importScripts&&(t=e.g.location+"");var n=e.g.document;if(!t&&n&&(n.currentScript&&(t=n.currentScript.src),!t)){var r=n.getElementsByTagName("script");r.length&&(t=r[r.length-1].src)}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),e.p=t}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r(this,"gameDifficulty",null),r(this,"soundLevel",null),r(this,"language",null),r(this,"userName",null),r(this,"auth",null)}var t,o,i;return t=e,(o=[{key:"getUserName",value:function(){return this.userName}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getAuth",value:function(){return this.auth}},{key:"setAuth",value:function(e){this.auth=e}},{key:"getGameDifficulty",value:function(){return this.gameDifficulty}},{key:"setGameDifficulty",value:function(t){var n=t;n<0&&(n=e.GameDifficulty.easy),n>3&&(n=e.GameDifficulty.nightmare),this.gameDifficulty=n}},{key:"getSoundLevel",value:function(){return this.soundLevel}},{key:"setSoundLevel",value:function(e){var t=e;t<0&&(t=0),t>100&&(t=100),this.soundLevel=t}},{key:"getLanguage",value:function(){return this.language}},{key:"setLanguage",value:function(e){this.language=e}}])&&n(t.prototype,o),i&&n(t,i),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e){return a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a(e)}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s(r.key),r)}}function l(e,t,n){return(t=s(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e){var t=function(e,t){if("object"!==a(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==a(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===a(t)?t:String(t)}r(i,"GameDifficulty",{easy:0,normal:1,hard:2,nightmare:3});var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setCurrentPath",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.path=t,window.location.hash=t,e.callbacksArray.forEach((function(e){e(t,n)}))}},{key:"getCurrentPath",value:function(){return e.path}},{key:"getRealCurrentPath",value:function(){return window.location.hash.slice(1)}},{key:"addPathChangeListener",value:function(t){e.callbacksArray.push(t)}}],(n=null)&&u(t.prototype,n),r&&u(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,d(r.key),r)}}function d(e){var t=function(e,t){if("object"!==f(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==f(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===f(t)?t:String(t)}l(c,"data",{}),l(c,"path",null),l(c,"callbacksArray",[]);var y=function(){function e(){var t,n,r,o=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),t=this,r=[],(n=d(n="routes"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,window.addEventListener("hashchange",(function(){window.location.hash.slice(1)!==c.getCurrentPath()&&c.setCurrentPath(window.location.hash.slice(1))}),!1),c.addPathChangeListener((function(e,t){o.resolve(e,t)}))}var t,n,r;return t=e,(n=[{key:"resolve",value:function(e,t){this.routes.forEach((function(n){n.path==="/".concat(e.split("/")[1])&&n.controller.resolve(e.replace(n.path,""),t)}))}},{key:"addRoute",value:function(e,t){this.routes.push({path:e,controller:t})}}])&&m(t.prototype,n),r&&m(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function p(e){return p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},p(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==p(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==p(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===p(i)?i:String(i)),r)}var o,i}var b=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.isHidden=!1,this.rootEl=document.createElement("div"),this.rootEl.classList.add("sidebar"),this.sidebarContainer=document.createElement("div"),this.sidebarContainer.classList.add("sidebar__container"),this.buttonClose=document.createElement("div"),this.buttonClose.classList.add("button-close"),this.sidebarVerticalSeparator=document.createElement("div"),this.sidebarVerticalSeparator.classList.add("sidebar__vertical-separator"),this.mainMenuList=document.createElement("div"),this.mainMenuList.classList.add("main-menu__list"),this.fastLangSwitch=document.createElement("div"),this.fastLangSwitch.classList.add("main-menu__fast-lang-sw","fast-lang-sw"),this.rootEl.append(this.sidebarContainer)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=this;this.data=e,this.sidebarContainer.innerHTML="",this.mainMenu=document.createElement("div"),this.mainMenu.classList.add("sidebar__main-menu","main-menu"),this.mainMenuList.innerHTML="",this.data.menu.forEach((function(n){var r=document.createElement("button");r.classList.add("main-menu__list-button"),r.textContent=n.text,r.onclick=function(){t.hide(),n.action(n.path)},e.currentPath&&e.currentPath===n.path&&(r.classList.add("main-menu__list-button_current"),r.onclick=null),t.mainMenuList.append(r)})),this.sidebarVerticalSeparator.innerHTML="";var n=document.createElement("span");n.innerText=this.data.separatorText;for(var r=0;r<10;r+=1)this.sidebarVerticalSeparator.append(n.cloneNode(!0));this.fastLangSwitch.innerHTML="",this.data.fastLangSw.forEach((function(e){var n=document.createElement("button");n.classList.add("fast-lang-sw__lang-button"),n.textContent=e.text,n.onclick=e.action,t.fastLangSwitch.append(n)})),this.mainMenu.append(this.buttonClose),this.mainMenu.append(this.mainMenuList),this.mainMenu.append(this.fastLangSwitch),this.sidebarContainer.appendChild(this.sidebarVerticalSeparator),this.sidebarContainer.appendChild(this.mainMenu)}},{key:"render",value:function(){return this.rootEl}},{key:"hide",value:function(){this.rootEl.classList.add("sidebar_hidden"),this.isHidden=!0}},{key:"show",value:function(){this.rootEl.classList.remove("sidebar_hidden"),this.isHidden=!1}}])&&v(t.prototype,n),r&&v(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e){return h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},h(e)}function g(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==h(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==h(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===h(i)?i:String(i)),r)}var o,i}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataPlaceholder={title:"Art-Quiz.",isSmall:!1},this.rootEl=document.createElement("div"),this.rootEl.classList.add("top-bar"),this.menuButton=document.createElement("div"),this.menuButton.classList.add("burger-menu"),this.title=document.createElement("div"),this.title.classList.add("top-bar__title"),this.rootEl.appendChild(this.menuButton),this.rootEl.appendChild(this.title)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){e&&Object.keys(e).length>=1?this.data=e:this.data=this.dataPlaceholder,this.title.textContent=this.data.title,this.data.isSmall&&this.rootEl.classList.add("top-bar_s")}},{key:"render",value:function(){return this.rootEl}}])&&g(t.prototype,n),r&&g(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,L(r.key),r)}}function P(e,t,n){return(t=L(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L(e){var t=function(e,t){if("object"!==S(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==S(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===S(t)?t:String(t)}var T=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getDefaultStaticSquareImagesPath",value:function(){return e.defaultStaticSquareImagesPath}},{key:"getDefaultStaticFullImagesPath",value:function(){return e.defaultStaticFullImagesPath}},{key:"getDefaultStaticJsonSrcPath",value:function(){return e.defaultStaticJsonSrcPath}},{key:"getQuestionsPerLevel",value:function(){return e.questionsPerLevel}}],(n=null)&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function k(e){return k="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},k(e)}function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,I(r.key),r)}}function C(e,t,n){return(t=I(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function I(e){var t=function(e,t){if("object"!==k(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==k(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===k(t)?t:String(t)}P(T,"questionsPerLevel",10),P(T,"defaultStaticSquareImagesPath","static/img/jpg/square/"),P(T,"defaultStaticFullImagesPath","static/img/jpg/full/"),P(T,"defaultStaticJsonSrcPath","static/json/imagesTranslated.json");var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getData",value:function(){return new Promise((function(t){null!==e.cachedData&&e.isCacheActive?t(e.cachedData):e.isEmpty().then((function(n){if(!n){var r=localStorage.getItem(e.localStorageItemName),o=JSON.parse(r),i=Object.keys(o).length>0?o:null;if(null!=i)return e.cachedData=i,void t(i)}var a=e.generateData();e.setData(a),t(a)}))}))}},{key:"destroy",value:function(){localStorage.removeItem(e.localStorageItemName)}},{key:"isEmpty",value:function(){return new Promise((function(t){var n=localStorage.getItem(e.localStorageItemName);t(!(n&&"{"===n[0]))}))}},{key:"setData",value:function(t){e.cachedData=t,localStorage.setItem(e.localStorageItemName,JSON.stringify(t))}},{key:"generateData",value:function(){var t=function(e,t){var n=Math.ceil(e),r=Math.floor(t);return Math.floor(Math.random()*(r-n+1))+n};localStorage.removeItem(e.localStorageItemName);var n=0,r=0,o=0,i=1,a=T.getDefaultStaticSquareImagesPath(),u=T.getQuestionsPerLevel(),l={settings:{gameDifficulty:0,soundLevel:50,language:0,userName:"UserName",Auth:""},gameDB:{level:[],question:[],answer:[],userAnswer:[]}};return e.srcData.data.forEach((function(e,s,c){s%u==0&&(s>=u&&(n+=1),l.gameDB.level.push({id:n,imageSrc:"".concat(a).concat(e.imageId,".jpg"),isLocked:n>=2,text:""})),l.gameDB.question.push({id:r,levelId:n,number:i,questionType:t(1,2),correctAnswerId:o,imageSrc:"".concat(a).concat(e.imageId,".jpg"),text:""}),l.gameDB.answer.push({id:o,questionId:r,imageSrc:"".concat(a).concat(e.imageId,".jpg"),text:"",name:e.name,author:e.author,year:e.year}),o+=1;for(var f=[],m=[],d=function(){for(var e=t(0,c.length-1);-1!==m.findIndex((function(t){return t===e}));)e=t(0,c.length-1);m.push(e),f.push({id:o,questionId:r,imageSrc:"".concat(a).concat(c[e].imageId,".jpg"),text:"",name:c[e].name,author:c[e].author,year:c[e].year}),o+=1},y=0;y<3;y+=1)d();f.forEach((function(e){return l.gameDB.answer.push(e)})),r+=1,i=i<u?i+=1:1})),l}}],(n=null)&&j(t.prototype,n),r&&j(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e){return A="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},A(e)}function _(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function D(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function q(e){var t=function(e,t){if("object"!==A(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==A(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===A(t)?t:String(t)}C(O,"localStorageItemName","art-quiz-game-data"),C(O,"srcData",null),C(O,"cachedData",null),C(O,"isCacheActive",!0);var x=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"dataToModel",value:function(e){var t=new i;return t.setGameDifficulty(e.gameDifficulty),t.setSoundLevel(e.soundLevel),t.setLanguage(e.language),t.setUserName(e.userName),t.setAuth(e.Auth),t}},{key:"getSettings",value:function(){return new Promise((function(t){O.getData().then((function(n){var r=n.settings;t(e.dataToModel(r))}))}))}},{key:"setSettings",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_(Object(n),!0).forEach((function(t){D(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i=e.modelToData(t);o.settings=i,n(O.setData(o))}))}))}},{key:"modelToData",value:function(e){return{gameDifficulty:e.getGameDifficulty(),soundLevel:e.getSoundLevel(),language:e.getLanguage(),userName:e.getUserName(),auth:e.getAuth()}}}],(n=null)&&N(t.prototype,n),r&&N(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function B(e){return B="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},B(e)}function M(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,R(r.key),r)}}function Q(e,t,n){return(t=R(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function R(e){var t=function(e,t){if("object"!==B(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==B(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===B(t)?t:String(t)}var U=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"getLocale",value:function(t){return e.locales[e.currentLocale][t]}},{key:"setCurrentLocale",value:function(t){e.currentLocale=t,x.getSettings().then((function(e){console.error(t);var n=e;e.setLanguage(t),x.setSettings(n)}))}},{key:"getCurrentLocale",value:function(){return e.currentLocale}}],(n=null)&&M(t.prototype,n),r&&M(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e){return H="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H(e)}function V(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==H(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==H(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===H(i)?i:String(i)),r)}var o,i}Q(U,"currentLocale",0),Q(U,"locales",[{localeName:"eng",title:"ArtQuiz",levelTitle:"Level",settingsTitle:"Settings",levelsTitle:"Levels",scoreTitle:"Score",aboutTitle:"About",sidebarMotto:"CREATE TEST DEPLOY BE SMART",levelLockedTitle:"Locked",levelStatsTitle:"Done",gamePaused:"Paused",gameQuestionType1:"Who wrote this picture?",gameQuestionType2:"Which one is written by",gameSelectTitle:"Select",gameCancelTitle:"Cancel",gameAnswerCorrect:"Correct",gameAnswerIncorrect:"Incorrect",gameNextButtonTitle:"Next",gamePictureNameTitle:"This is:",gameMadeByTitle:"Made by:",gameYearTitle:"Year of creation:",levelResults:"Results",gameResultNoAnswer:"No answer",gameResultBackToLevels:"Back to levels",gameResultLevelComplete:"Level complete",gameResultTryAgain:"Try again to unlock next level",gameResultGoodJob:"Good job!"},{localeName:"ru",title:"ArtQuiz",levelTitle:"Уровень",settingsTitle:"Настройки",levelsTitle:"Уровни",scoreTitle:"Счёт",aboutTitle:"О игре",sidebarMotto:"СОЗДАВАЙ ТЕСТИРУЙ РАЗВОРАЧИВАЙ БУДЬ УМЁН",levelLockedTitle:"Заблокировано",levelStatsTitle:"Отвечено",gamePaused:"Пауза",gameQuestionType1:"Кто написал эту картину?",gameQuestionType2:"Какую из картин написал автор",gameSelectTitle:"Выбрать",gameCancelTitle:"Отмена",gameAnswerCorrect:"Правильно",gameAnswerIncorrect:"Неправильно",gameNextButtonTitle:"Далее",gamePictureNameTitle:"Картина называется:",gameMadeByTitle:"Написана автором:",gameYearTitle:"Год создания:",levelResults:"Результаты",gameResultNoAnswer:"Неотвечено",gameResultBackToLevels:"Назад к уровням",gameResultLevelComplete:"Уровень завершён",gameResultTryAgain:"Попробуйте ещё раз, чтобы открыть следующий уровень",gameResultGoodJob:"Хорошая работа!"}]);var G=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataPlaceholder={id:-1,imgSrc:"static/img/jpg/square/0.jpg",isLocked:!1,text:""},this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-card"),this.rootEl.classList.add("level-list__card"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("level-card__image"),this.imageEl=document.createElement("img"),this.imageContainer.append(this.imageEl),this.levelText=document.createElement("div"),this.levelText.classList.add("level-card__text"),this.levelTitle=document.createElement("div"),this.levelTitle.classList.add("level-card__level-name"),this.levelStats=document.createElement("div"),this.levelStats.classList.add("level-card__level-stats"),this.levelText.append(this.levelTitle),this.levelText.append(this.levelStats),this.rootEl.append(this.imageContainer),this.rootEl.append(this.levelText),this.setData(t)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){e&&Object.keys(e).length>=1&&(this.data=e,this.imageEl.src=this.data.getImageSrc(),this.imageEl.alt="".concat(U.getLocale("levelTitle")," ").concat(this.data.getId()),this.levelTitle.textContent="".concat(U.getLocale("levelTitle")," ").concat(this.data.getId()),this.levelStats.textContent=this.data.getIsLocked()?U.getLocale("levelLockedTitle"):"".concat(U.getLocale("levelStatsTitle")," ").concat(this.data.getQuestionsAnsweredNumber(),"/").concat(this.data.getQuestionsNumber()),this.data.getIsLocked()&&this.rootEl.classList.add("level-card_locked"))}},{key:"render",value:function(){return this.rootEl}}])&&V(t.prototype,n),r&&V(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function J(e){return J="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},J(e)}function Y(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==J(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==J(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===J(i)?i:String(i)),r)}var o,i}var W=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-list"),this.levelsList=[]}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=this;e&&(this.levelsList=[],this.rootEl.innerHTML="",e.levelsList.forEach((function(e){var n=new G;n.setData(e),t.levelsList.push(n),e.getIsLocked()||(n.render().onclick=function(){c.setCurrentPath("/game/level/".concat(e.getId()))}),t.rootEl.append(n.render())})))}},{key:"render",value:function(){return this.rootEl}}])&&Y(t.prototype,n),r&&Y(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e){return F="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},F(e)}function $(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==F(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==F(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===F(i)?i:String(i)),r)}var o,i}var z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("questions-numbers-list")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=this,n=e.levelModel,r=e.questionNumber;this.rootEl.innerHTML="",n.getQuestions().forEach((function(e,n){var o=document.createElement("div");o.classList.add("questions-numbers-list__item");var i=document.createElement("p");i.innerText=e.getNumber(),e.getUserAnswer()&&(e.isUserAnswerCorrect()?o.classList.add("questions-numbers-list__item_correct"):o.classList.add("questions-numbers-list__item_incorrect")),r>=0&&n===r-1&&o.classList.add("questions-numbers-list__item_active"),o.append(i),t.rootEl.append(o)}))}},{key:"render",value:function(){return this.rootEl}}])&&$(t.prototype,n),r&&$(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function K(e){return K="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},K(e)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==K(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==K(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===K(i)?i:String(i)),r)}var o,i}var Z=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-card")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=document.createElement("div");t.classList.add("score-card__wrapper");var n=document.createElement("div");n.classList.add("score-card__text"),n.innerText="".concat(e.getQuestionsAnsweredNumber(),"/").concat(e.getQuestionsNumber());var r=document.createElement("div");r.classList.add("score-card__title"),r.innerText="".concat(U.getLocale("levelTitle")," ").concat(e.getId());var o=new z;o.setData({levelModel:e}),e.getIsLocked()?this.rootEl.classList.add("score-card_locked"):this.rootEl.onclick=function(){return c.setCurrentPath("/game/level/".concat(e.getId(),"/result"))},t.append(n,r,o.render()),this.rootEl.style.backgroundImage="url('".concat(e.getImageSrc(),"')"),this.rootEl.append(t)}},{key:"render",value:function(){return this.rootEl}}])&&X(t.prototype,n),r&&X(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ee(e){return ee="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ee(e)}function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ee(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ee(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ee(i)?i:String(i)),r)}var o,i}var oe=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-cards-container")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t,n=e.levelsList.map((function(e){var t=new Z;return t.setData(e),t.render()}));(t=this.rootEl).append.apply(t,te(n))}},{key:"render",value:function(){return this.rootEl}}])&&re(t.prototype,n),r&&re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e){return ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ie(e)}function ae(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ie(i)?i:String(i)),r)}var o,i}var ue=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-list")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){this.rootEl.innerHTML="";var t=new oe;t.setData(e),this.rootEl.append(t.render())}},{key:"render",value:function(){return this.rootEl}}])&&ae(t.prototype,n),r&&ae(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function le(e){return le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},le(e)}function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===le(i)?i:String(i)),r)}var o,i}var ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("settings"),this.rootEl.innerText="Settings"}var t,n,r;return t=e,(n=[{key:"render",value:function(){return this.rootEl}}])&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fe(e){return fe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fe(e)}function me(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==fe(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==fe(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===fe(i)?i:String(i)),r)}var o,i}var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("about"),this.rootEl.innerText="About"}var t,n,r;return t=e,(n=[{key:"render",value:function(){return this.rootEl}}])&&me(t.prototype,n),r&&me(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ye(e){return ye="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ye(e)}function pe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function ve(e,t,n){return(t=be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){var t=function(e,t){if("object"!==ye(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ye(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ye(t)?t:String(t)}var he=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ve(this,"id",-1),ve(this,"imageSrc",null),ve(this,"text",null),ve(this,"isLocked",!0),ve(this,"questions",null),this.id=t}var t,n,r;return t=e,(n=[{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getId",value:function(){return this.id}},{key:"getQuestions",value:function(){return this.questions}},{key:"setQuestions",value:function(e){this.questions=e}},{key:"getText",value:function(){return this.text}},{key:"setText",value:function(e){this.text=e}},{key:"getIsLocked",value:function(){return this.isLocked}},{key:"setIsLocked",value:function(e){this.isLocked=e}},{key:"getQuestionsNumber",value:function(){return this.questions.length}},{key:"getQuestionsAnsweredNumber",value:function(){return this.questions.filter((function(e){return null!==e.userAnswer})).length}},{key:"getNumberOfAnsweredQuestions",value:function(){return this.questions.map((function(e){return e.getUserAnswer()})).reduce((function(e,t){return null!==t?e+1:e}),0)}},{key:"getNumberOfCorrectAnsweredQuestions",value:function(){return this.questions.map((function(e){return e.isUserAnswerCorrect()})).filter((function(e){return null!==e&&e})).length}}])&&pe(t.prototype,n),r&&pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e){return ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ge(e)}function we(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ee(r.key),r)}}function Se(e,t,n){return(t=Ee(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ee(e){var t=function(e,t){if("object"!==ge(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ge(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ge(t)?t:String(t)}var Pe=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Se(this,"id",-1),Se(this,"levelId",-1),Se(this,"number",void 0),Se(this,"questionType",null),Se(this,"answers",null),Se(this,"correctAnswerId",-1),Se(this,"userAnswer",null),Se(this,"imageSrc",null),Se(this,"text",null),this.id=t,this.levelId=n}var t,n,r;return t=e,(n=[{key:"getLevelId",value:function(){return this.levelId}},{key:"setLevelId",value:function(e){this.levelId=e}},{key:"getId",value:function(){return this.id}},{key:"getNumber",value:function(){return this.number}},{key:"setNumber",value:function(e){this.number=e}},{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getText",value:function(){return this.text}},{key:"setText",value:function(e){this.text=e}},{key:"getQuestionType",value:function(){return this.questionType}},{key:"setQuestionType",value:function(e){this.questionType=e}},{key:"getAnswers",value:function(){return this.answers}},{key:"setAnswers",value:function(e){this.answers=e}},{key:"getCorrectAnswerId",value:function(){return this.correctAnswerId}},{key:"setCorrectAnswerId",value:function(e){this.correctAnswerId=e}},{key:"getUserAnswer",value:function(){return this.userAnswer}},{key:"setUserAnswer",value:function(e){this.userAnswer=e}},{key:"getCorrectAnswer",value:function(){var e=this;return this.answers.filter((function(t){return t.getId()===e.correctAnswerId}))[0]}},{key:"isUserAnswerCorrect",value:function(){return this.userAnswer?null!=this.userAnswer.getAnswerId()&&this.userAnswer.getAnswerId()===this.correctAnswerId:null}}])&&we(t.prototype,n),r&&we(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function Te(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,je(r.key),r)}}function ke(e,t,n){return(t=je(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function je(e){var t=function(e,t){if("object"!==Le(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Le(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Le(t)?t:String(t)}Se(Pe,"QuestionTypes",{WhoIs:1,WhichIs:2});var Ce=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),ke(this,"id",-1),ke(this,"questionId",-1),ke(this,"imageSrc",null),ke(this,"author",null),ke(this,"name",null),ke(this,"year",null),this.id=t}var t,n,r;return t=e,(n=[{key:"getQuestionId",value:function(){return this.questionId}},{key:"setQuestionId",value:function(e){this.questionId=e}},{key:"getId",value:function(){return this.id}},{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getAuthor",value:function(){return this.author}},{key:"setAuthor",value:function(e){this.author=e}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getYear",value:function(){return this.year}},{key:"setYear",value:function(e){this.year=e}}])&&Te(t.prototype,n),r&&Te(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ie(e){return Ie="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ie(e)}function Oe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Ie(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Ie(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Ie(i)?i:String(i)),r)}var o,i}var Ae=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"dataToModel",value:function(e){var t=new Ce(e.id);return t.setQuestionId(e.questionId),t.setImageSrc(e.imageSrc),t.setName(e.name),t.setAuthor(e.author),t.setYear(e.year),t}},{key:"getAllByQuestionId",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=r.gameDB.answer.filter((function(e){return e.questionId===t}));n(o.map((function(t){return e.dataToModel(t)})))}))}))}}],(n=null)&&Oe(t.prototype,n),r&&Oe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _e(e){return _e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_e(e)}function De(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,qe(r.key),r)}}function Ne(e,t,n){return(t=qe(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function qe(e){var t=function(e,t){if("object"!==_e(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===_e(t)?t:String(t)}var xe=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Ne(this,"id",-1),Ne(this,"answerId",-1),Ne(this,"questionId",-1),Ne(this,"thinkingTime",null),Ne(this,"answerDate",null),this.id=t}var t,n,r;return t=e,(n=[{key:"getId",value:function(){return this.id}},{key:"getQuestionId",value:function(){return this.questionId}},{key:"setQuestionId",value:function(e){this.questionId=e}},{key:"getAnswerId",value:function(){return this.answerId}},{key:"setAnswerId",value:function(e){this.answerId=e}},{key:"getAnswerDate",value:function(){return this.answerDate}},{key:"setAnswerDate",value:function(e){this.answerDate=e}},{key:"getThinkingTime",value:function(){return this.thinkingTime}},{key:"setThinkingTime",value:function(e){this.thinkingTime=e}}])&&De(t.prototype,n),r&&De(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Be(e){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Be(e)}function Me(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Qe(e,t,n){return(t=Ve(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e){return function(e){if(Array.isArray(e))return Ue(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Ue(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ue(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ue(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function He(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ve(r.key),r)}}function Ve(e){var t=function(e,t){if("object"!==Be(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Be(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===Be(t)?t:String(t)}var Ge=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"dataToModel",value:function(e){var t=new xe(e.id);return t.setAnswerId(e.answerId),t.setQuestionId(e.questionId),t.setThinkingTime(e.thinkingTime),t.setAnswerDate(e.answerDate),t}},{key:"getByQuestionId",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=r.gameDB.userAnswer.filter((function(e){return e.questionId===t}));o&&o.length>0&&n(o.map((function(t){return e.dataToModel(t)}))[0]),n(null)}))}))}},{key:"setUserAnswer",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Me(Object(n),!0).forEach((function(t){Qe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Me(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i=e.modelToData(t);e.getByQuestionId(t.getQuestionId()).then((function(e){if(e){i.id=e.getId();var t=o.gameDB.userAnswer.findIndex((function(t){return t.id===e.getId()}));o.gameDB.userAnswer[t]=i}else i.id=function(e){if(!e||0===e.length)return-1;var t=e.map((function(e){return e.id}));return Math.max.apply(Math,Re(t))}(o.gameDB.userAnswer)+1,o.gameDB.userAnswer.push(i);n(O.setData(o))}))}))}))}},{key:"modelToData",value:function(e){return{id:e.getId(),questionId:e.getQuestionId(),answerId:e.getAnswerId(),thinkingTime:e.getThinkingTime(),answerDate:e.getAnswerDate()}}}],(n=null)&&He(t.prototype,n),r&&He(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Je(e){return Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Je(e)}function Ye(e){return function(e){if(Array.isArray(e))return We(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return We(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return We(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function We(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==Je(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==Je(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===Je(i)?i:String(i)),r)}var o,i}var $e=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"dataToModel",value:function(e){var t=new Pe(e.id);t.setNumber(e.number),t.setLevelId(e.levelId),t.setQuestionType(e.questionType),t.setCorrectAnswerId(e.correctAnswerId),t.setImageSrc(e.imageSrc),t.setText(e.text);var n=new Promise((function(n){Ae.getAllByQuestionId(e.id).then((function(e){n(t.setAnswers(e))}))})),r=new Promise((function(n){Ge.getByQuestionId(e.id).then((function(e){n(t.setUserAnswer(e))}))}));return new Promise((function(e){Promise.all([n,r]).then(e(t))}))}},{key:"getAllByLevelId",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=r.gameDB.question.filter((function(e){return e.levelId===t}));Promise.all(o.map((function(t){return e.dataToModel(t)}))).then((function(e){return n(e)}))}))}))}},{key:"getLastWithAnswerByLevelId",value:function(t){return new Promise((function(n){e.getAllByLevelId(t).then((function(e){var t=e.filter((function(e){return e.getUserAnswer()})),r=t.map((function(e){return e.getNumber()})),o=Math.max.apply(Math,Ye(r)),i=t.filter((function(e){return e.getNumber()===o}))[0];n(i)}))}))}}],(n=null)&&Fe(t.prototype,n),r&&Fe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ze(e){return ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ze(e)}function Ke(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Xe(e,t,n){return(t=et(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,et(r.key),r)}}function et(e){var t=function(e,t){if("object"!==ze(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ze(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===ze(t)?t:String(t)}var tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"dataToModel",value:function(e){return new Promise((function(t){var n=new he(e.id);n.setImageSrc(e.imageSrc),n.setText(e.text),n.setIsLocked(e.isLocked),$e.getAllByLevelId(e.id).then((function(e){n.setQuestions(e),t(n)}))}))}},{key:"getAll",value:function(){return new Promise((function(t){O.getData().then((function(n){var r=n.gameDB.level.map((function(t){return e.dataToModel(t)}));Promise.all(r).then((function(e){return t(e)}))}))}))}},{key:"getById",value:function(t){return new Promise((function(n){O.getData().then((function(r){var o=null;(o=r.gameDB.level.filter((function(e){return e.id===parseInt(t,10)})))&&o.length>0&&o.map((function(t){return e.dataToModel(t)}))[0].then((function(e){return n(e)}))}))}))}},{key:"setLevelIsLockeById",value:function(e,t){return new Promise((function(n){O.getData().then((function(r){var o=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ke(Object(n),!0).forEach((function(t){Xe(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ke(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},r),i=o.gameDB.level;if(i&&i.length>0){var a=o.gameDB.level.findIndex((function(t){return t.id===e}));o.gameDB.level[a].isLocked=t,n(O.setData(o))}}))}))}}],(n=null)&&Ze(t.prototype,n),r&&Ze(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function nt(e){return nt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(e)}function rt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==nt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==nt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===nt(i)?i:String(i)),r)}var o,i}var ot=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentElement=t,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.sidebar=new b,this.generateSidebarData(),this.page=document.createElement("div"),this.page.classList.add("main-page"),this.topBar=new w,this.topBar.setData({title:"".concat(U.getLocale("levelsTitle"),".")}),this.topBarEl=this.topBar.render(),this.levelsListView=new W,this.scoreView=new ue,this.settingsView=new ce,this.aboutView=new de,this.currentView=document.createElement("div"),this.page.append(this.topBarEl),this.page.append(this.currentView),this.rootEl.append(this.sidebar.render()),this.sidebar.hide(),this.rootEl.append(this.page),this.sidebar.buttonClose.onclick=function(){n.sidebar.hide()},this.topBar.menuButton.onclick=function(){n.sidebar.show()}}var t,n,r;return t=e,(n=[{key:"generateSidebarData",value:function(e){var t={separatorText:U.getLocale("sidebarMotto"),currentPath:"/main".concat(e),menu:[{text:U.getLocale("levelsTitle"),path:"/main/levels",action:c.setCurrentPath},{text:U.getLocale("scoreTitle"),path:"/main/score",action:c.setCurrentPath},{text:U.getLocale("settingsTitle"),path:"/main/settings",action:c.setCurrentPath},{text:U.getLocale("aboutTitle"),path:"/main/about",action:c.setCurrentPath}],fastLangSw:[{text:"eng",action:function(){U.setCurrentLocale(0),c.setCurrentPath(c.getCurrentPath())}},{text:"ru",action:function(){U.setCurrentLocale(1),c.setCurrentPath(c.getCurrentPath())}}]};this.sidebar.setData(t)}},{key:"rewriteView",value:function(e){this.currentView.innerHTML="",this.currentView.append(e)}},{key:"viewLevels",value:function(){var e=this;tt.getAll().then((function(t){e.levelsListView.setData({levelsList:t})})),this.rewriteView(this.levelsListView.render()),this.topBar.setData({title:"".concat(U.getLocale("levelsTitle"),".")})}},{key:"viewSettings",value:function(){this.rewriteView(this.settingsView.render()),this.topBar.setData({title:"".concat(U.getLocale("settingsTitle"),".")})}},{key:"viewScore",value:function(){var e=this;tt.getAll().then((function(t){return e.scoreView.setData({levelsList:t})})),this.rewriteView(this.scoreView.render()),this.topBar.setData({title:"".concat(U.getLocale("scoreTitle"),".")})}},{key:"viewAbout",value:function(){this.rewriteView(this.aboutView.render()),this.topBar.setData({title:"".concat(U.getLocale("aboutTitle"),".")})}},{key:"resolve",value:function(e){switch(this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.generateSidebarData(e),e.slice(1)){case"levels":this.viewLevels();break;case"settings":this.viewSettings();break;case"about":this.viewAbout();break;case"score":this.viewScore()}}}])&&rt(t.prototype,n),r&&rt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function it(e){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(e)}function at(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==it(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==it(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===it(i)?i:String(i)),r)}var o,i}var ut=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.buttonSelect=document.createElement("button"),this.buttonSelect.classList.add("variant-popup__button"),this.buttonSelect.classList.add("variant-popup__button_select"),this.buttonSelect.textContent=U.getLocale("gameSelectTitle"),this.buttonCancel=document.createElement("button"),this.buttonCancel.classList.add("variant-popup__button"),this.buttonCancel.classList.add("variant-popup__button_cancel"),this.buttonCancel.textContent=U.getLocale("gameCancelTitle"),this.buttonCancel.onclick=function(){return t.hide()},this.variantButtons=document.createElement("div"),this.variantButtons.classList.add("variant-popup__buttons"),this.variantButtons.append(this.buttonCancel),this.variantButtons.append(this.buttonSelect),this.downloadButton=document.createElement("button"),this.downloadButton.classList.add("variant-popup__download-button")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=this,n=e.answer,r=e.question,o=e.questionPopup,i=e.startTime,a=document.createElement("div");a.classList.add("variant-popup");var u=document.createElement("div");u.classList.add("variant-popup__image");var l=document.createElement("img");l.src=n.getImageSrc(),l.alt="variant",u.append(l),u.append(this.downloadButton);var s=n.getImageSrc().split("/").reverse()[0];this.downloadButton.onclick=function(){return function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(n.getImageSrc(),s)},a.append(u),a.append(this.variantButtons),this.rootEl.innerHTML="",this.rootEl.append(a),this.buttonSelect.onclick=function(){t.hide(),o.setData({question:r,answer:n,startTime:i}),o.show()}}},{key:"hide",value:function(){this.rootEl.classList.add("overlay_hidden")}},{key:"show",value:function(){this.rootEl.classList.remove("overlay_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&at(t.prototype,n),r&&at(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function lt(e){return lt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},lt(e)}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==lt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==lt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===lt(i)?i:String(i)),r)}var o,i}var ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.popupContainer=document.createElement("div"),this.popupContainer.classList.add("question-popup"),this.buttonNext=document.createElement("button"),this.buttonNext.classList.add("question-popup__button"),this.rootEl.append(this.popupContainer)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t,n,r,o=e.answer,i=e.question,a=e.startTime;t=o,n=i,(r=new xe(-1)).setAnswerDate((new Date).toISOString()),r.setAnswerId(t.getId()),r.setQuestionId(n.getId()),r.setThinkingTime((new Date).getTime()-a),Ge.setUserAnswer(r);var u=document.createElement("div");u.classList.add("question-popup__result"),this.buttonNext.textContent=U.getLocale("gameNextButtonTitle");var l=document.createElement("div");if(l.classList.add("question-popup__result-description"),i.getCorrectAnswerId()===o.getId()){u.innerText=U.getLocale("gameAnswerCorrect");var s=document.createElement("div");s.classList.add("question-popup__desc-pair"),s.innerText=U.getLocale("gamePictureNameTitle");var c=document.createElement("p");c.innerText='"'.concat(o.getName()[U.getLocale("localeName")],'"'),s.append(c);var f=document.createElement("div");f.classList.add("question-popup__desc-pair"),f.innerText=U.getLocale("gameMadeByTitle");var m=document.createElement("p");m.innerText=o.getAuthor()[U.getLocale("localeName")],f.append(m);var d=document.createElement("div");d.classList.add("question-popup__desc-pair"),d.innerText=U.getLocale("gameYearTitle");var y=document.createElement("p");y.innerText=o.getYear(),d.append(y),l.append(s),l.append(f),l.append(d),u.classList.add("question-popup__result_correct")}else u.innerText=U.getLocale("gameAnswerIncorrect"),u.classList.add("question-popup__result_incorrect");this.popupContainer.innerHTML="",this.popupContainer.append(u),this.popupContainer.append(l),this.popupContainer.append(this.buttonNext)}},{key:"hide",value:function(){this.rootEl.classList.add("overlay_hidden")}},{key:"show",value:function(){this.rootEl.classList.remove("overlay_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&st(t.prototype,n),r&&st(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}(),ft=e.p+"assets/f2850b52a194c5fefb0d.png";function mt(e){return mt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mt(e)}function dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==mt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==mt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===mt(i)?i:String(i)),r)}var o,i}var yt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("result-card"),this.rootEl=document.createElement("div"),this.rootEl.classList.add("result-list__card"),this.rootEl.classList.add("result-card"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("result-card__image"),this.imageEl=document.createElement("img"),this.imageContainer.append(this.imageEl),this.resultText=document.createElement("div"),this.resultText.classList.add("result-card__text"),this.resultTitle=document.createElement("div"),this.resultTitle.classList.add("result-card__question-name"),this.resultStats=document.createElement("div"),this.resultStats.classList.add("result-card__question-stats"),this.resultText.append(this.resultTitle),this.resultText.append(this.resultStats),this.rootEl.append(this.imageContainer),this.rootEl.append(this.resultText)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=e.isUserAnswerCorrect(),n=e.getUserAnswer();if(console.error(n),this.imageEl.alt="question img",this.imageEl.src=ft,null!=n&&t){this.imageEl.src=e.getImageSrc(),this.resultTitle.textContent=U.getLocale("gameAnswerCorrect");var r=e.getCorrectAnswer(),o="".concat(r.getAuthor()[U.getLocale("localeName")]," - ").concat(r.getName()[U.getLocale("localeName")]);o.length>34&&(o=o.slice(0,34).concat("...")),this.resultStats.textContent=o}null!==n&&t||(this.rootEl.classList.add("result-card_locked"),this.resultTitle.textContent=U.getLocale("gameAnswerIncorrect"),null===n&&(this.resultTitle.textContent=U.getLocale("gameResultNoAnswer")))}},{key:"render",value:function(){return this.rootEl}}])&&dt(t.prototype,n),r&&dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function pt(e){return pt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pt(e)}function vt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==pt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==pt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===pt(i)?i:String(i)),r)}var o,i}var bt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("result-list")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=this;this.rootEl.innerHTML="",e.levelModel.getQuestions().forEach((function(e){var n=new yt;n.setData(e),t.rootEl.append(n.render())}))}},{key:"render",value:function(){return this.rootEl}}])&&vt(t.prototype,n),r&&vt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ht(e){return ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ht(e)}function gt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==ht(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==ht(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===ht(i)?i:String(i)),r)}var o,i}var wt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-result"),this.title=document.createElement("div"),this.title.classList.add("level-result__title"),this.resultStatsContainer=document.createElement("div"),this.resultStatsContainer.classList.add("level-result__stats-container"),this.nextButton=document.createElement("div"),this.nextButton.classList.add("level-result__button-next"),this.rootEl.append(this.title,this.resultStatsContainer,this.nextButton)}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t=e.isUnlocked,n=e.isFreshUnlocked,r=e.levelModel,o=e.numberOfAnsweredQuestions,i=e.numberOfCorrectAnsweredQuestions,a=function(e,t,n,r){var o=document.createElement("div");o.classList.add("level-result__stats-card"),o.classList.add("stats-card");var i=document.createElement("div");i.classList.add("stats-card__measurement");var a=document.createElement("div");a.classList.add("stats-card__measurement-line");var u=document.createElement("div");u.classList.add("stats-card__measurement-indicator"),r?u.classList.add("stats-card__measurement-indicator_correct"):u.classList.add("stats-card__measurement-indicator_incorrect");var l=document.createElement("div");l.classList.add("stats-card__measurement-text"),l.innerText=n;var s=document.createElement("div");s.classList.add("stats-card__title"),s.innerText=e;var c=n/(t/100);return u.style.width="".concat(c,"%"),a.append(u),i.append(a,l),o.append(s,i),o},u="";if(this.nextButton.innerText=U.getLocale("gameResultBackToLevels"),this.nextButton.onclick=function(){return c.setCurrentPath("/main/levels/")},t?(u=U.getLocale("gameResultLevelComplete"),this.nextButton.innerText=U.getLocale("gameNextButtonTitle"),this.nextButton.onclick=function(){return c.setCurrentPath("/game/level/".concat(r.getId()+1))}):u=U.getLocale("gameResultTryAgain"),n&&(u+=" ".concat(U.getLocale("gameResultGoodJob"))),this.title.innerText=u,this.resultStatsContainer.innerHTML="",null!=o&&o>0){var l=a(U.getLocale("gameAnswerCorrect"),o,i,!0),s=a(U.getLocale("gameAnswerIncorrect"),o,o-i,!1);this.resultStatsContainer.append(l,s)}}},{key:"render",value:function(){return this.rootEl}}])&&gt(t.prototype,n),r&&gt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function St(e){return St="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},St(e)}function Et(e){return function(e){if(Array.isArray(e))return Pt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return Pt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Pt(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Pt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==St(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==St(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===St(i)?i:String(i)),r)}var o,i}var Tt=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-card")}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){var t,n,r=(new Date).getTime(),o=e.question,i=function(e){for(var t=Et(e),n=t.length-1;n>0;n-=1){var r=Math.floor(Math.random()*(n+1)),o=t[n];t[n]=t[r],t[r]=o}return t};if(o.getQuestionType()===Pe.QuestionTypes.WhoIs){this.rootEl.classList.add("question-whois");var a=document.createElement("div");a.classList.add("question-card__question");var u=document.createElement("div");u.classList.add("question-card__image");var l=document.createElement("button");l.classList.add("variant-popup__download-button");var s=document.createElement("img");s.src=o.getImageSrc(),s.alt=U.getLocale("gameQuestionType1");var f=document.createElement("div");f.classList.add("question-card__title"),f.innerText=U.getLocale("gameQuestionType1");var m=document.createElement("div");m.classList.add("question-card_answers-grid");var d=o.getImageSrc().split("/").reverse()[0];l.onclick=function(){return function(e,t){var n=document.createElement("a");n.setAttribute("href",e),n.setAttribute("download",t),document.body.appendChild(n),n.click(),document.body.removeChild(n)}(o.getImageSrc(),d)},i((t=o.getAnswers(),n=e,t.map((function(e){var t=n.questionPopup,o=document.createElement("div");return o.classList.add("question-card_answer"),o.innerText=e.getAuthor()[U.getLocale("localeName")],o.onclick=function(){t.setData({answer:e,question:n.question,startTime:r}),t.show()},o})))).forEach((function(e){return m.append(e)})),u.append(s,l),a.append(u),a.append(f),this.rootEl.append(a),this.rootEl.append(m)}else if(o.getQuestionType()===Pe.QuestionTypes.WhichIs){this.rootEl.classList.add("question-which");var y=document.createElement("div");y.classList.add("question-which_answers-grid");var p=function(e,t){return e.map((function(e){var n=t.variantPopup,o=document.createElement("div");o.classList.add("question-which_answer");var i=document.createElement("img");return i.alt=U.getLocale("gameQuestionType2"),i.src=e.getImageSrc(),o.onclick=function(){n.setData({answer:e,question:t.question,questionPopup:t.questionPopup,startTime:r}),n.show()},o.append(i),o}))}(o.getAnswers(),e);i(p).forEach((function(e){return y.append(e)}));var v=document.createElement("div");v.classList.add("question-which__question");var b=document.createElement("div");b.classList.add("question-which__title");var h=o.getAnswers().filter((function(e){return e.getId()===o.getCorrectAnswerId()}))[0];b.innerHTML="".concat(U.getLocale("gameQuestionType2"),"<b>").concat(h.getAuthor()[U.getLocale("localeName")],"?</b>"),v.append(b),this.rootEl.append(y),this.rootEl.append(v)}e.questionPopup.buttonNext.onclick=function(){if(e.questionPopup.hide(),o.getNumber()<T.getQuestionsPerLevel()){var t="/game/level/".concat(o.getLevelId(),"/question/").concat(parseInt(o.getNumber(),10)+1);c.setCurrentPath(t)}else if(o.getNumber()===T.getQuestionsPerLevel()){var n="/game/level/".concat(o.getLevelId(),"/result");c.setCurrentPath(n)}}}},{key:"hide",value:function(){this.rootEl.classList.add("question-card_hidden")}},{key:"setActive",value:function(){this.rootEl.classList.add("question-card_active")}},{key:"render",value:function(){return this.rootEl}}])&&Lt(t.prototype,n),r&&Lt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function kt(e){return kt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kt(e)}function jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==kt(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==kt(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===kt(i)?i:String(i)),r)}var o,i}var Ct=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-cards-container"),this.rootEl.innerText="Questions here"}var t,n,r;return t=e,(n=[{key:"setData",value:function(e){this.rootEl.innerHTML="";var t=new Tt,n=e.level.getQuestions().filter((function(t){return t.getNumber()===parseInt(e.questionNumber,10)}))[0];t.setData({question:n,variantPopup:e.variantPopup,questionPopup:e.questionPopup}),this.rootEl.appendChild(t.render())}},{key:"hide",value:function(){this.rootEl.classList.remove("game-question-page_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&jt(t.prototype,n),r&&jt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function It(e){return It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},It(e)}function Ot(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==It(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==It(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===It(i)?i:String(i)),r)}var o,i}var At=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentElement=t,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.questionCardsContainer=new Ct,this.gameQuestionsPage=document.createElement("div"),this.gameQuestionsPage.classList.add("game-question-page"),this.gameResultPage=document.createElement("div"),this.gameResultPage.classList.add("game-result-page"),this.resultList=new bt,this.levelResult=new wt,this.gameHeaderContainer=document.createElement("div"),this.gameHeaderContainer.classList.add("header-container"),this.resultTopBar=new w,this.resultTopBar.setData({title:"".concat(U.getLocale("levelResult")),isSmall:!1}),this.topBar=new w,this.topBar.setData({title:"".concat(U.getLocale("levelTitle")," 0"),isSmall:!0}),this.sidebar=new b,this.generateSidebarData(),this.sidebar.hide(),this.variantPopup=new ut,this.variantPopup.hide(),this.questionPopup=new ct,this.questionPopup.hide(),this.questionsNumbersList=new z,this.gameHeaderContainer.append(this.topBar.render()),this.gameHeaderContainer.append(this.questionsNumbersList.render()),this.gameQuestionsPage.append(this.gameHeaderContainer),this.gameQuestionsPage.append(this.questionCardsContainer.render()),this.gameQuestionsPage.append(this.variantPopup.render()),this.gameQuestionsPage.append(this.questionPopup.render()),this.gameResultPage.append(this.resultTopBar.render()),this.gameResultPage.append(this.levelResult.render(),this.resultList.render()),this.rootEl.append(this.sidebar.render()),this.rootEl.append(this.gameQuestionsPage),this.sidebar.buttonClose.onclick=function(){n.sidebar.hide()},this.topBar.menuButton.onclick=function(){n.sidebar.show()},this.resultTopBar.menuButton.onclick=function(){n.sidebar.show()}}var t,n,r;return t=e,(n=[{key:"generateSidebarData",value:function(){var e={separatorText:U.getLocale("sidebarMotto"),currentPath:"!current",menu:[{text:"[".concat(U.getLocale("gamePaused"),"]"),path:"!current",action:null},{text:U.getLocale("levelsTitle"),path:"/main/levels",action:c.setCurrentPath}],fastLangSw:[{text:"eng",action:function(){U.setCurrentLocale(0),c.setCurrentPath(c.getCurrentPath())}},{text:"ru",action:function(){U.setCurrentLocale(1),c.setCurrentPath(c.getCurrentPath())}}]};this.sidebar.setData(e)}},{key:"showQuestion",value:function(e,t){t.getIsLocked()||(this.questionsNumbersList.setData({levelModel:t,questionNumber:e}),this.topBar.setData({title:"".concat(U.getLocale("levelTitle")," ").concat(t.getId()),isSmall:!0}),this.questionCardsContainer.setData({level:t,variantPopup:this.variantPopup,questionPopup:this.questionPopup,questionNumber:e}))}},{key:"showLevelResult",value:function(e){var t=this;if(!e.getIsLocked()){this.questionsNumbersList.setData({levelModel:e}),this.resultTopBar.setData({title:"".concat(U.getLocale("levelResults")),isSmall:!1});var n=e.getNumberOfAnsweredQuestions(),r=e.getNumberOfCorrectAnsweredQuestions(),o=!1,i=!1;r/(n/100)>=60&&(o=!0,tt.getById(e.id+1).then((function(a){a&&a.getIsLocked()&&(tt.setLevelIsLockeById(e.id+1,!1),i=!0),t.levelResult.setData({isUnlocked:o,isFreshUnlocked:i,levelModel:e,numberOfAnsweredQuestions:n,numberOfCorrectAnsweredQuestions:r})}))),this.levelResult.setData({isUnlocked:o,isFreshUnlocked:i,levelModel:e,numberOfAnsweredQuestions:n,numberOfCorrectAnsweredQuestions:r}),this.resultList.setData({levelModel:e}),this.renderPage(this.gameResultPage)}}},{key:"renderPage",value:function(e){this.rootEl.innerHTML="",this.rootEl.append(this.sidebar.render()),this.rootEl.append(e)}},{key:"resolve",value:function(e){var t=this;this.generateSidebarData(),this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.sidebar.hide();var n=e.slice(1).split("/"),r=Number.parseInt(n[1],10),o=Number.parseInt(n[3],10);"level"===n[0]&&(4===n.length&&"question"===n[2]?tt.getById(r).then((function(e){t.showQuestion(o,e)})):3===n.length&&"result"===n[2]?tt.getById(r).then((function(e){t.showLevelResult(e)})):2===n.length&&$e.getLastWithAnswerByLevelId(r).then((function(e){var t=null!=e?e.getNumber():0;t>=10?t=1:t+=1,c.setCurrentPath("/game/level/".concat(r,"/question/").concat(t))}))),this.renderPage(this.gameQuestionsPage)}}])&&Ot(t.prototype,n),r&&Ot(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Dt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==_t(e)||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==_t(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===_t(i)?i:String(i)),r)}var o,i}new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.className=t,this.rootEl=document.getElementsByClassName(t)[0],this.userSettings=new i,this.router=new y,this.mainController=new ot(this.rootEl),this.gameController=new At(this.rootEl)}var t,n,r;return t=e,(n=[{key:"run",value:function(){this.router.addRoute("/main",this.mainController),this.router.addRoute("/game",this.gameController),O.isEmpty().then((function(e){e?fetch(T.getDefaultStaticJsonSrcPath()).then((function(e){return e.json()})).then((function(e){O.srcData=e,c.setCurrentPath("/main/levels")})):x.getSettings().then((function(e){U.setCurrentLocale(e.getLanguage()),c.getRealCurrentPath()&&""!==c.getRealCurrentPath()?c.setCurrentPath(c.getRealCurrentPath()):c.setCurrentPath("/main/levels")}))}))}}])&&Dt(t.prototype,n),r&&Dt(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())("app").run()}();