!function(){"use strict";function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var n=function(){function n(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),t(this,"gameDifficulty",null),t(this,"soundLevel",null),t(this,"language",null),t(this,"userName",null),t(this,"auth",null)}var a,r,i;return a=n,(r=[{key:"getUserName",value:function(){return this.userName}},{key:"setUserName",value:function(e){this.userName=e}},{key:"getAuth",value:function(){return this.auth}},{key:"setAuth",value:function(e){this.auth=e}},{key:"getGameDifficulty",value:function(){return this.gameDifficulty}},{key:"setGameDifficulty",value:function(e){var t=e;t<0&&(t=n.GameDifficulty.easy),t>3&&(t=n.GameDifficulty.nightmare),this.gameDifficulty=t}},{key:"getSoundLevel",value:function(){return this.soundLevel}},{key:"setSoundLevel",value:function(e){var t=e;t<0&&(t=0),t>100&&(t=100),this.soundLevel=t}},{key:"getLanguage",value:function(){return this.language}},{key:"setLanguage",value:function(e){var t=e;"eng"===e&&"ru"===e||(t="eng"),this.language=t}},{key:"toJSON",value:function(){return JSON.stringify({gameDifficulty:this.gameDifficulty,soundLevel:this.soundLevel,language:this.language})}},{key:"fromJsonObj",value:function(e){this.gameDifficulty=e.gameDifficulty,this.soundLevel=e.soundLevel,this.language=e.language}}])&&e(a.prototype,r),i&&e(a,i),Object.defineProperty(a,"prototype",{writable:!1}),n}();function a(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}t(n,"GameDifficulty",{easy:0,normal:1,hard:2,nightmare:3});var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,r;return t=e,r=[{key:"setCurrentPath",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};e.path=t,window.location.hash=t,e.callbacksArray.forEach((function(e){e(t,n)}))}},{key:"getCurrentPath",value:function(){return e.path}},{key:"getRealCurrentPath",value:function(){return window.location.hash.slice(1)}},{key:"addPathChangeListener",value:function(t){e.callbacksArray.push(t)}}],(n=null)&&a(t.prototype,n),r&&a(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}r(i,"data",{}),r(i,"path",null),r(i,"callbacksArray",[]);var s=function(){function e(){var t,n,a,r=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),a=[],(n="routes")in(t=this)?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,window.addEventListener("hashchange",(function(){window.location.hash.slice(1)!==i.getCurrentPath()&&i.setCurrentPath(window.location.hash.slice(1))}),!1),i.addPathChangeListener((function(e,t){r.resolve(e,t)}))}var t,n,a;return t=e,(n=[{key:"resolve",value:function(e,t){this.routes.forEach((function(n){n.path==="/".concat(e.split("/")[1])&&n.controller.resolve(e.replace(n.path,""),t)}))}},{key:"addRoute",value:function(e,t){this.routes.push({path:e,controller:t})}}])&&o(t.prototype,n),a&&o(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function l(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var u=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.data=t,this.isHidden=!1,this.rootEl=document.createElement("div"),this.rootEl.classList.add("sidebar"),this.sidebarContainer=document.createElement("div"),this.sidebarContainer.classList.add("sidebar__container"),this.buttonClose=document.createElement("div"),this.buttonClose.classList.add("button-close"),this.sidebarVerticalSeparator=document.createElement("div"),this.sidebarVerticalSeparator.classList.add("sidebar__vertical-separator"),this.mainMenuList=document.createElement("div"),this.mainMenuList.classList.add("main-menu__list"),this.fastLangSwitch=document.createElement("div"),this.fastLangSwitch.classList.add("main-menu__fast-lang-sw","fast-lang-sw"),this.rootEl.append(this.sidebarContainer)}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t=this;this.data=e,this.sidebarContainer.innerHTML="",this.mainMenu=document.createElement("div"),this.mainMenu.classList.add("sidebar__main-menu","main-menu"),this.mainMenuList.innerHTML="",this.data.menu.forEach((function(e){var n=document.createElement("button");n.classList.add("main-menu__list-button"),n.textContent=e.text,n.onclick=e.action,t.mainMenuList.append(n)})),this.sidebarVerticalSeparator.innerHTML="";var n=document.createElement("span");n.innerText=this.data.separatorText;for(var a=0;a<10;a+=1)this.sidebarVerticalSeparator.append(n.cloneNode(!0));this.fastLangSwitch.innerHTML="",this.data.fastLangSw.forEach((function(e){var n=document.createElement("button");n.classList.add("fast-lang-sw__lang-button"),n.textContent=e.text,n.onclick=e.action,t.fastLangSwitch.append(n)})),this.mainMenu.append(this.buttonClose),this.mainMenu.append(this.mainMenuList),this.mainMenu.append(this.fastLangSwitch),this.sidebarContainer.appendChild(this.sidebarVerticalSeparator),this.sidebarContainer.appendChild(this.mainMenu)}},{key:"render",value:function(){return this.rootEl}},{key:"hide",value:function(){this.rootEl.classList.add("sidebar_hidden"),this.isHidden=!0}},{key:"show",value:function(){this.rootEl.classList.remove("sidebar_hidden"),this.isHidden=!1}}])&&l(t.prototype,n),a&&l(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function c(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataPlaceholder={title:"Art-Quiz.",isSmall:!1},this.rootEl=document.createElement("div"),this.rootEl.classList.add("top-bar"),this.menuButton=document.createElement("div"),this.menuButton.classList.add("burger-menu"),this.title=document.createElement("div"),this.title.classList.add("top-bar__title"),this.rootEl.appendChild(this.menuButton),this.rootEl.appendChild(this.title)}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){e&&Object.keys(e).length>=1?this.data=e:this.data=this.dataPlaceholder,this.title.textContent=this.data.title,this.data.isSmall&&this.rootEl.classList.add("top-bar_s")}},{key:"render",value:function(){return this.rootEl}}])&&c(t.prototype,n),a&&c(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function h(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function f(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getLocale",value:function(t){return e.locales[e.currentLocale][t]}}],(n=null)&&h(t.prototype,n),a&&h(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function v(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}f(p,"currentLocale",0),f(p,"locales",[{localeName:"eng",title:"ArtQuiz",levelTitle:"Level",settingsTitle:"Settings",levelsTitle:"Levels",scoreTitle:"Score",aboutTitle:"About",sidebarMotto:"CREATE TEST DEPLOY BE SMART",levelLockedTitle:"Locked",levelStatsTitle:"Done",gamePaused:"Paused",gameQuestionType1:"Who wrote this picture?",gameQuestionType2:"Which one is written by",gameSelectTitle:"Select",gameCancelTitle:"Cancel",gameAnswerCorrect:"Correct",gameAnswerIncorrect:"Incorrect",gameNextButtonTitle:"Next",gamePictureNameTitle:"This is:",gameMadeByTitle:"Made by:",gameYearTitle:"Year of creation:"},{localeName:"ru",title:"ArtQuiz",levelTitle:"Уровень",settingsTitle:"Настройки",levelsTitle:"Уровни",scoreTitle:"Счёт",aboutTitle:"О игре",sidebarMotto:"СОЗДАВАЙ ТЕСТИРУЙ РАЗВОРАЧИВАЙ БУДЬ УМЁН",levelLockedTitle:"Заблокировано",levelStatsTitle:"Отвечено",gamePaused:"Пауза",gameQuestionType1:"Кто написал эту картину?",gameQuestionType2:"Какую из картин написал автор",gameSelectTitle:"Выбрать",gameCancelTitle:"Отмена",gameAnswerCorrect:"Правильно",gameAnswerIncorrect:"Неправильно",gameNextButtonTitle:"Далее",gamePictureNameTitle:"Картина называется:",gameMadeByTitle:"Написана автором:",gameYearTitle:"Год создания:"}]);var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.dataPlaceholder={id:-1,imgSrc:"static/img/jpg/square/0.jpg",isLocked:!1,text:""},this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-card"),this.rootEl.classList.add("level-list__card"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("level-card__image"),this.imageEl=document.createElement("img"),this.imageContainer.append(this.imageEl),this.levelText=document.createElement("div"),this.levelText.classList.add("level-card__text"),this.levelTitle=document.createElement("div"),this.levelTitle.classList.add("level-card__level-name"),this.levelStats=document.createElement("div"),this.levelStats.classList.add("level-card__level-stats"),this.levelText.append(this.levelTitle),this.levelText.append(this.levelStats),this.rootEl.append(this.imageContainer),this.rootEl.append(this.levelText),this.setData(t)}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){e&&Object.keys(e).length>=1&&(this.data=e,this.imageEl.src=this.data.getImageSrc(),this.imageEl.alt="".concat(p.getLocale("levelTitle")," ").concat(this.data.getId()),this.levelTitle.textContent="".concat(p.getLocale("levelTitle")," ").concat(this.data.getId()),this.levelStats.textContent=this.data.getIsLocked()?p.getLocale("levelLockedTitle"):"".concat(p.getLocale("levelStatsTitle")," ").concat(this.data.getQuestionsAnsweredNumber(),"/").concat(this.data.getQuestionsNumber()),this.data.getIsLocked()&&this.rootEl.classList.add("level-card_locked"))}},{key:"render",value:function(){return this.rootEl}}])&&v(t.prototype,n),a&&v(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function g(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-list"),this.levelsList=[]}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t=this;e&&(this.levelsList=[],this.rootEl.innerHTML="",e.levelsList.forEach((function(e){var n=new m;n.setData(e),t.levelsList.push(n),e.getIsLocked()||(n.render().onclick=function(){i.setCurrentPath("/game/level/".concat(e.getId()))}),t.rootEl.append(n.render())})))}},{key:"render",value:function(){return this.rootEl}}])&&g(t.prototype,n),a&&g(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function b(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var w=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("questions-numbers-list")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t=this,n=e.levelModel,a=e.questionNumber;this.rootEl.innerHTML="",n.getQuestions().forEach((function(e,n){var r=document.createElement("div");r.classList.add("questions-numbers-list__item");var i=document.createElement("p");i.innerText=e.getNumber(),e.getUserAnswer()&&(e.isUserAnswerCorrect()?r.classList.add("questions-numbers-list__item_correct"):r.classList.add("questions-numbers-list__item_incorrect")),a>=0&&n===a-1&&r.classList.add("questions-numbers-list__item_active"),r.append(i),t.rootEl.append(r)}))}},{key:"render",value:function(){return this.rootEl}}])&&b(t.prototype,n),a&&b(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function E(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var k=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-card")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t=document.createElement("div");t.classList.add("score-card__wrapper");var n=document.createElement("div");n.classList.add("score-card__text"),n.innerText="".concat(e.getQuestionsAnsweredNumber(),"/").concat(e.getQuestionsNumber());var a=document.createElement("div");a.classList.add("score-card__title"),a.innerText="".concat(p.getLocale("levelTitle")," ").concat(e.getId());var r=new w;r.setData({levelModel:e}),e.getIsLocked()&&this.rootEl.classList.add("score-card_locked"),t.append(n,a,r.render()),this.rootEl.style.backgroundImage="url('".concat(e.getImageSrc(),"')"),this.rootEl.append(t)}},{key:"render",value:function(){return this.rootEl}}])&&E(t.prototype,n),a&&E(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function L(e){return function(e){if(Array.isArray(e))return T(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return T(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return T(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function P(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var I=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-cards-container")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t,n=e.levelsList.map((function(e){var t=new k;return t.setData(e),t.render()}));(t=this.rootEl).append.apply(t,L(n))}},{key:"render",value:function(){return this.rootEl}}])&&P(t.prototype,n),a&&P(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function S(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var C=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-list")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){this.rootEl.innerHTML="";var t=new I;t.setData(e),this.rootEl.append(t.render())}},{key:"render",value:function(){return this.rootEl}}])&&S(t.prototype,n),a&&S(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function A(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var D=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("settings"),this.rootEl.innerText="Settings"}var t,n,a;return t=e,(n=[{key:"render",value:function(){return this.rootEl}}])&&A(t.prototype,n),a&&A(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function _(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var q=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("about"),this.rootEl.innerText="About"}var t,n,a;return t=e,(n=[{key:"render",value:function(){return this.rootEl}}])&&_(t.prototype,n),a&&_(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function j(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var O=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("loading"),this.rootEl.innerText="Loading..."}var t,n,a;return t=e,(n=[{key:"render",value:function(){return this.rootEl}}])&&j(t.prototype,n),a&&j(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function x(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function N(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var B=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getDefaultStaticSquareImagesPath",value:function(){return e.defaultStaticSquareImagesPath}},{key:"getDefaultStaticFullImagesPath",value:function(){return e.defaultStaticFullImagesPath}},{key:"getDefaultStaticJsonSrcPath",value:function(){return e.defaultStaticJsonSrcPath}},{key:"getQuestionsPerLevel",value:function(){return e.questionsPerLevel}}],(n=null)&&x(t.prototype,n),a&&x(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function M(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Q(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}N(B,"questionsPerLevel",10),N(B,"defaultStaticSquareImagesPath","static/img/jpg/square/"),N(B,"defaultStaticFullImagesPath","static/img/jpg/full/"),N(B,"defaultStaticJsonSrcPath","static/json/imagesTranslated.json");var V=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"getData",value:function(){var t=localStorage.getItem(e.localStorageItemName);if(e.isNotEmpty()){var n=JSON.parse(t);return Object.keys(n).length>0?n:null}var a=e.generateData();return e.setData(a),a}},{key:"destroy",value:function(){localStorage.removeItem(e.localStorageItemName)}},{key:"isNotEmpty",value:function(){var t=localStorage.getItem(e.localStorageItemName);return t&&"{"===t[0]}},{key:"setData",value:function(t){localStorage.setItem(e.localStorageItemName,JSON.stringify(t))}},{key:"generateData",value:function(){var t=function(e,t){var n=Math.ceil(e),a=Math.floor(t);return Math.floor(Math.random()*(a-n+1))+n};localStorage.removeItem(e.localStorageItemName);var n=0,a=0,r=0,i=1,o=B.getDefaultStaticSquareImagesPath(),s=B.getQuestionsPerLevel(),l={settings:{},gameDB:{level:[],question:[],answer:[],userAnswer:[]}};return e.srcData.data.forEach((function(e,u,c){u%s==0&&(u>=s&&(n+=1),l.gameDB.level.push({id:n,imageSrc:"".concat(o).concat(e.imageId,".jpg"),isLocked:n>=2,text:""})),l.gameDB.question.push({id:a,levelId:n,number:i,questionType:t(1,2),correctAnswerId:r,imageSrc:"".concat(o).concat(e.imageId,".jpg"),text:""}),l.gameDB.answer.push({id:r,questionId:a,imageSrc:"".concat(o).concat(e.imageId,".jpg"),text:"",name:e.name,author:e.author,year:e.year}),r+=1;for(var d=[],h=[],f=function(e){for(var n=t(0,c.length-1);-1!==h.findIndex((function(e){return e===n}));)n=t(0,c.length-1);h.push(n),d.push({id:r,questionId:a,imageSrc:"".concat(o).concat(c[n].imageId,".jpg"),text:"",name:c[n].name,author:c[n].author,year:c[n].year}),r+=1},p=0;p<3;p+=1)f();d.forEach((function(e){return l.gameDB.answer.push(e)})),a+=1,i=i<s?i+=1:1})),l}}],(n=null)&&M(t.prototype,n),a&&M(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function H(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function U(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Q(V,"localStorageItemName","art-quiz-game-data"),Q(V,"srcData",null);var J=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),U(this,"id",-1),U(this,"imageSrc",null),U(this,"text",null),U(this,"isLocked",!0),U(this,"questions",null),this.id=t}var t,n,a;return t=e,(n=[{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getId",value:function(){return this.id}},{key:"getQuestions",value:function(){return this.questions}},{key:"setQuestions",value:function(e){this.questions=e}},{key:"getText",value:function(){return this.text}},{key:"setText",value:function(e){this.text=e}},{key:"getIsLocked",value:function(){return this.isLocked}},{key:"setIsLocked",value:function(e){this.isLocked=e}},{key:"getQuestionsNumber",value:function(){return this.questions.length}},{key:"getQuestionsAnsweredNumber",value:function(){return this.questions.filter((function(e){return null!==e.userAnswer})).length}}])&&H(t.prototype,n),a&&H(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function R(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var W=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Y(this,"id",-1),Y(this,"levelId",-1),Y(this,"number",void 0),Y(this,"questionType",null),Y(this,"answers",null),Y(this,"correctAnswerId",-1),Y(this,"userAnswer",null),Y(this,"imageSrc",null),Y(this,"text",null),this.id=t,this.levelId=n}var t,n,a;return t=e,(n=[{key:"getLevelId",value:function(){return this.levelId}},{key:"setLevelId",value:function(e){this.levelId=e}},{key:"getId",value:function(){return this.id}},{key:"getNumber",value:function(){return this.number}},{key:"setNumber",value:function(e){this.number=e}},{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getText",value:function(){return this.text}},{key:"setText",value:function(e){this.text=e}},{key:"getQuestionType",value:function(){return this.questionType}},{key:"setQuestionType",value:function(e){this.questionType=e}},{key:"getAnswers",value:function(){return this.answers}},{key:"setAnswers",value:function(e){this.answers=e}},{key:"getCorrectAnswerId",value:function(){return this.correctAnswerId}},{key:"setCorrectAnswerId",value:function(e){this.correctAnswerId=e}},{key:"getUserAnswer",value:function(){return this.userAnswer}},{key:"setUserAnswer",value:function(e){this.userAnswer=e}},{key:"isUserAnswerCorrect",value:function(){return!!this.userAnswer&&null!=this.userAnswer.getAnswerId()&&this.userAnswer.getAnswerId()===this.correctAnswerId}}])&&R(t.prototype,n),a&&R(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function G(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Y(W,"QuestionTypes",{WhoIs:1,WhichIs:2});var $=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),z(this,"id",-1),z(this,"questionId",-1),z(this,"imageSrc",null),z(this,"author",null),z(this,"name",null),z(this,"year",null),this.id=t}var t,n,a;return t=e,(n=[{key:"getQuestionId",value:function(){return this.questionId}},{key:"setQuestionId",value:function(e){this.questionId=e}},{key:"getId",value:function(){return this.id}},{key:"getImageSrc",value:function(){return this.imageSrc}},{key:"setImageSrc",value:function(e){this.imageSrc=e}},{key:"getAuthor",value:function(){return this.author}},{key:"setAuthor",value:function(e){this.author=e}},{key:"getName",value:function(){return this.name}},{key:"setName",value:function(e){this.name=e}},{key:"getYear",value:function(){return this.year}},{key:"setYear",value:function(e){this.year=e}}])&&G(t.prototype,n),a&&G(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function F(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var K=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"dataToModel",value:function(e){var t=new $(e.id);return t.setQuestionId(e.questionId),t.setImageSrc(e.imageSrc),t.setName(e.name),t.setAuthor(e.author),t.setYear(e.year),t}},{key:"getAllByQuestionId",value:function(t){return V.getData().gameDB.answer.filter((function(e){return e.questionId===t})).map((function(t){return e.dataToModel(t)}))}}],(n=null)&&F(t.prototype,n),a&&F(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function X(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ee=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Z(this,"id",-1),Z(this,"answerId",-1),Z(this,"questionId",-1),Z(this,"thinkingTime",null),Z(this,"answerDate",null),this.id=t}var t,n,a;return t=e,(n=[{key:"getId",value:function(){return this.id}},{key:"getQuestionId",value:function(){return this.questionId}},{key:"setQuestionId",value:function(e){this.questionId=e}},{key:"getAnswerId",value:function(){return this.answerId}},{key:"setAnswerId",value:function(e){this.answerId=e}},{key:"getAnswerDate",value:function(){return this.answerDate}},{key:"setAnswerDate",value:function(e){this.answerDate=e}},{key:"getThinkingTime",value:function(){return this.thinkingTime}},{key:"setThinkingTime",value:function(e){this.thinkingTime=e}}])&&X(t.prototype,n),a&&X(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function te(e){return function(e){if(Array.isArray(e))return ne(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ne(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ne(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ne(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function ae(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var re=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"dataToModel",value:function(e){var t=new ee(e.id);return t.setAnswerId(e.answerId),t.setQuestionId(e.questionId),t.setThinkingTime(e.thinkingTime),t.setAnswerDate(e.answerDate),t}},{key:"getByQuestionId",value:function(t){var n=V.getData().gameDB.userAnswer.filter((function(e){return e.questionId===t})),a=null;return n&&n.length>0&&(a=n.map((function(t){return e.dataToModel(t)}))[0]),a}},{key:"setUserAnswer",value:function(t){var n=V.getData(),a=e.modelToData(t),r=e.getByQuestionId(t.getQuestionId());if(r){a.id=r.getId();var i=n.gameDB.userAnswer.findIndex((function(e){return e.id===r.getId()}));n.gameDB.userAnswer[i]=a}else a.id=function(e){if(!e||0===e.length)return-1;var t=e.map((function(e){return e.id}));return Math.max.apply(Math,te(t))}(n.gameDB.userAnswer)+1,n.gameDB.userAnswer.push(a);V.setData(n)}},{key:"modelToData",value:function(e){return{id:e.getId(),questionId:e.getQuestionId(),answerId:e.getAnswerId(),thinkingTime:e.getThinkingTime(),answerDate:e.getAnswerDate()}}}],(n=null)&&ae(t.prototype,n),a&&ae(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ie(e){return function(e){if(Array.isArray(e))return oe(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return oe(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oe(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function oe(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function se(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var le=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"dataToModel",value:function(e){var t=new W(e.id),n=K.getAllByQuestionId(e.id);return t.setNumber(e.number),t.setLevelId(e.levelId),t.setQuestionType(e.questionType),t.setCorrectAnswerId(e.correctAnswerId),t.setImageSrc(e.imageSrc),t.setText(e.text),t.setAnswers(n),t.setUserAnswer(re.getByQuestionId(e.id)),t}},{key:"getAllByLevelId",value:function(t){return V.getData().gameDB.question.filter((function(e){return e.levelId===t})).map((function(t){return e.dataToModel(t)}))}},{key:"getLastWithAnswerByLevelId",value:function(t){var n=null,a=(n=(n=e.getAllByLevelId(t)).filter((function(e){return e.getUserAnswer()}))).map((function(e){return e.getNumber()})),r=Math.max.apply(Math,ie(a));return n.filter((function(e){return e.getNumber()===r}))[0]}}],(n=null)&&se(t.prototype,n),a&&se(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ue(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"dataToModel",value:function(e){var t=new J(e.id),n=le.getAllByLevelId(e.id);return t.setImageSrc(e.imageSrc),t.setText(e.text),t.setIsLocked(e.isLocked),t.setQuestions(n),t}},{key:"getAll",value:function(){return V.getData().gameDB.level.map((function(t){return e.dataToModel(t)}))}},{key:"getById",value:function(t){var n=null,a=null;return(n=V.getData().gameDB.level.filter((function(e){return e.id===parseInt(t,10)})))&&n.length>0&&(a=n.map((function(t){return e.dataToModel(t)}))[0]),a}}],(n=null)&&ue(t.prototype,n),a&&ue(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function de(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var he=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentElement=t,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.sidebar=new u,this.generateSidebarData(),this.page=document.createElement("div"),this.page.classList.add("main-page"),this.topBar=new d,this.topBar.setData({title:"".concat(p.getLocale("levelsTitle"),".")}),this.topBarEl=this.topBar.render(),this.levelsListView=new y,this.scoreView=new C,this.settingsView=new D,this.aboutView=new q,this.loadingView=new O,this.currentView=this.loadingView.render(),this.page.append(this.topBarEl),this.page.append(this.currentView),this.rootEl.append(this.sidebar.render()),this.sidebar.hide(),this.rootEl.append(this.page),this.sidebar.buttonClose.onclick=function(){n.sidebar.hide()},this.topBar.menuButton.onclick=function(){n.sidebar.show()}}var t,n,a;return t=e,(n=[{key:"generateSidebarData",value:function(){var e={separatorText:p.getLocale("sidebarMotto"),menu:[{text:p.getLocale("levelsTitle"),action:function(){i.setCurrentPath("/main/levels")}},{text:p.getLocale("scoreTitle"),action:function(){i.setCurrentPath("/main/score")}},{text:p.getLocale("settingsTitle"),action:function(){return i.setCurrentPath("/main/settings")}},{text:p.getLocale("aboutTitle"),action:function(){return i.setCurrentPath("/main/about")}}],fastLangSw:[{text:"eng",action:function(){p.currentLocale=0,i.setCurrentPath(i.getCurrentPath())}},{text:"ru",action:function(){p.currentLocale=1,i.setCurrentPath(i.getCurrentPath())}}]};this.sidebar.setData(e)}},{key:"viewLevels",value:function(){this.levelsListView.setData({levelsList:ce.getAll()}),this.currentView=this.levelsListView.render(),this.topBar.setData({title:"".concat(p.getLocale("levelsTitle"),".")}),this.generateSidebarData()}},{key:"viewSettings",value:function(){this.currentView=this.settingsView.render(),this.topBar.setData({title:"".concat(p.getLocale("settingsTitle"),".")}),this.generateSidebarData()}},{key:"viewScore",value:function(){this.scoreView.setData({levelsList:ce.getAll()}),this.currentView=this.scoreView.render(),this.topBar.setData({title:"".concat(p.getLocale("scoreTitle"),".")}),this.generateSidebarData()}},{key:"viewAbout",value:function(){this.currentView=this.aboutView.render(),this.topBar.setData({title:"".concat(p.getLocale("aboutTitle"),".")}),this.generateSidebarData()}},{key:"loading",value:function(){this.currentView=this.loadingView.render(),this.page.append(this.currentView)}},{key:"resolve",value:function(e){this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.page.innerHTML="";var t=!1;switch(e.slice(1)){case"levels":this.viewLevels();break;case"settings":this.viewSettings();break;case"about":this.viewAbout();break;case"score":this.viewScore();break;case"loading":this.loading(),t=!0}t||(this.page.append(this.topBarEl),this.page.append(this.currentView),this.sidebar.hide())}}])&&de(t.prototype,n),a&&de(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function fe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var pe=function(){function e(){var t=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.buttonSelect=document.createElement("button"),this.buttonSelect.classList.add("variant-popup__button"),this.buttonSelect.classList.add("variant-popup__button_select"),this.buttonSelect.textContent=p.getLocale("gameSelectTitle"),this.buttonCancel=document.createElement("button"),this.buttonCancel.classList.add("variant-popup__button"),this.buttonCancel.classList.add("variant-popup__button_cancel"),this.buttonCancel.textContent=p.getLocale("gameCancelTitle"),this.buttonCancel.onclick=function(){return t.hide()},this.variantButtons=document.createElement("div"),this.variantButtons.classList.add("variant-popup__buttons"),this.variantButtons.append(this.buttonCancel),this.variantButtons.append(this.buttonSelect),this.downloadButton=document.createElement("button"),this.downloadButton.classList.add("variant-popup__download-button")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t=this,n=e.answer,a=e.question,r=e.questionPopup,i=e.startTime,o=document.createElement("div");o.classList.add("variant-popup");var s=document.createElement("div");s.classList.add("variant-popup__image");var l=document.createElement("img");l.src=n.getImageSrc(),l.alt="variant",s.append(l),s.append(this.downloadButton),o.append(s),o.append(this.variantButtons),this.rootEl.innerHTML="",this.rootEl.append(o),this.buttonSelect.onclick=function(){t.hide(),r.setData({question:a,answer:n,startTime:i}),r.show()}}},{key:"hide",value:function(){this.rootEl.classList.add("overlay_hidden")}},{key:"show",value:function(){this.rootEl.classList.remove("overlay_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&fe(t.prototype,n),a&&fe(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ve(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var me=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.popupContainer=document.createElement("div"),this.popupContainer.classList.add("question-popup"),this.buttonNext=document.createElement("button"),this.buttonNext.classList.add("question-popup__button"),this.rootEl.append(this.popupContainer)}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t,n,a,r=e.answer,i=e.question,o=e.startTime;t=r,n=i,(a=new ee(-1)).setAnswerDate((new Date).toISOString()),a.setAnswerId(t.getId()),a.setQuestionId(n.getId()),a.setThinkingTime((new Date).getTime()-o),re.setUserAnswer(a);var s=document.createElement("div");s.classList.add("question-popup__result"),this.buttonNext.textContent=p.getLocale("gameNextButtonTitle");var l=document.createElement("div");if(l.classList.add("question-popup__result-description"),i.getCorrectAnswerId()===r.getId()){s.innerText=p.getLocale("gameAnswerCorrect");var u=document.createElement("div");u.classList.add("question-popup__desc-pair"),u.innerText=p.getLocale("gamePictureNameTitle");var c=document.createElement("p");c.innerText='"'.concat(r.getName()[p.getLocale("localeName")],'"'),u.append(c);var d=document.createElement("div");d.classList.add("question-popup__desc-pair"),d.innerText=p.getLocale("gameMadeByTitle");var h=document.createElement("p");h.innerText=r.getAuthor()[p.getLocale("localeName")],d.append(h);var f=document.createElement("div");f.classList.add("question-popup__desc-pair"),f.innerText=p.getLocale("gameYearTitle");var v=document.createElement("p");v.innerText=r.getYear(),f.append(v),l.append(u),l.append(d),l.append(f),s.classList.add("question-popup__result_correct")}else s.innerText=p.getLocale("gameAnswerIncorrect"),s.classList.add("question-popup__result_incorrect");this.popupContainer.innerHTML="",this.popupContainer.append(s),this.popupContainer.append(l),this.popupContainer.append(this.buttonNext)}},{key:"hide",value:function(){this.rootEl.classList.add("overlay_hidden")}},{key:"show",value:function(){this.rootEl.classList.remove("overlay_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&ve(t.prototype,n),a&&ve(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function ge(e){return function(e){if(Array.isArray(e))return ye(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"==typeof e)return ye(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ye(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ye(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}function be(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var we=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-card")}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){var t,n,a=(new Date).getTime(),r=e.question,o=function(e){for(var t=ge(e),n=t.length-1;n>0;n-=1){var a=Math.floor(Math.random()*(n+1)),r=t[n];t[n]=t[a],t[a]=r}return t};if(r.getQuestionType()===W.QuestionTypes.WhoIs){this.rootEl.classList.add("question-whois");var s=document.createElement("div");s.classList.add("question-card__question");var l=document.createElement("div");l.classList.add("question-card__image");var u=document.createElement("img");u.src=r.getImageSrc(),u.alt=p.getLocale("gameQuestionType1");var c=document.createElement("div");c.classList.add("question-card__title"),c.innerText=p.getLocale("gameQuestionType1");var d=document.createElement("div");d.classList.add("question-card_answers-grid"),o((t=r.getAnswers(),n=e,t.map((function(e){var t=n.questionPopup,r=document.createElement("div");return r.classList.add("question-card_answer"),r.innerText=e.getAuthor()[p.getLocale("localeName")],r.onclick=function(){t.setData({answer:e,question:n.question,startTime:a}),t.show()},r})))).forEach((function(e){return d.append(e)})),l.append(u),s.append(l),s.append(c),this.rootEl.append(s),this.rootEl.append(d)}else if(r.getQuestionType()===W.QuestionTypes.WhichIs){this.rootEl.classList.add("question-which");var h=document.createElement("div");h.classList.add("question-which_answers-grid");var f=function(e,t){return e.map((function(e){var n=t.variantPopup,r=document.createElement("div");r.classList.add("question-which_answer");var i=document.createElement("img");return i.alt=p.getLocale("gameQuestionType2"),i.src=e.getImageSrc(),r.onclick=function(){n.setData({answer:e,question:t.question,questionPopup:t.questionPopup,startTime:a}),n.show()},r.append(i),r}))}(r.getAnswers(),e);o(f).forEach((function(e){return h.append(e)}));var v=document.createElement("div");v.classList.add("question-which__question");var m=document.createElement("div");m.classList.add("question-which__title");var g=r.getAnswers().filter((function(e){return e.getId()===r.getCorrectAnswerId()}))[0];m.innerHTML="".concat(p.getLocale("gameQuestionType2"),"<b>").concat(g.getAuthor()[p.getLocale("localeName")],"?</b>"),v.append(m),this.rootEl.append(h),this.rootEl.append(v)}e.questionPopup.buttonNext.onclick=function(){if(e.questionPopup.hide(),r.getNumber()<B.getQuestionsPerLevel()){var t="/game/level/".concat(r.getLevelId(),"/question/").concat(parseInt(r.getNumber(),10)+1);i.setCurrentPath(t)}}}},{key:"hide",value:function(){this.rootEl.classList.add("question-card_hidden")}},{key:"setActive",value:function(){this.rootEl.classList.add("question-card_active")}},{key:"render",value:function(){return this.rootEl}}])&&be(t.prototype,n),a&&be(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Ee(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var ke=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-cards-container"),this.rootEl.innerText="Questions here"}var t,n,a;return t=e,(n=[{key:"setData",value:function(e){this.rootEl.innerHTML="";var t=new we,n=e.level.getQuestions().filter((function(t){return t.getNumber()===parseInt(e.questionNumber,10)}))[0];t.setData({question:n,variantPopup:e.variantPopup,questionPopup:e.questionPopup}),this.rootEl.appendChild(t.render())}},{key:"hide",value:function(){this.rootEl.classList.remove("game-question-page_hidden")}},{key:"render",value:function(){return this.rootEl}}])&&Ee(t.prototype,n),a&&Ee(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Le(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}var Te=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.parentElement=t,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.questionCardsContainer=new ke,this.gameQuestionsPage=document.createElement("div"),this.gameQuestionsPage.classList.add("game-question-page"),this.headerContainer=document.createElement("div"),this.headerContainer.classList.add("header-container"),this.topBar=new d,this.topBar.setData({title:"".concat(p.getLocale("levelTitle")," 0"),isSmall:!0}),this.sidebar=new u,this.generateSidebarData(),this.sidebar.hide(),this.variantPopup=new pe,this.variantPopup.hide(),this.questionPopup=new me,this.questionPopup.hide(),this.questionsNumbersList=new w,this.headerContainer.append(this.topBar.render()),this.headerContainer.append(this.questionsNumbersList.render()),this.gameQuestionsPage.append(this.headerContainer),this.gameQuestionsPage.append(this.questionCardsContainer.render()),this.gameQuestionsPage.append(this.variantPopup.render()),this.gameQuestionsPage.append(this.questionPopup.render()),this.rootEl.append(this.sidebar.render()),this.rootEl.append(this.gameQuestionsPage),this.sidebar.buttonClose.onclick=function(){n.sidebar.hide()},this.topBar.menuButton.onclick=function(){n.sidebar.show()}}var t,n,a;return t=e,(n=[{key:"generateSidebarData",value:function(){var e={separatorText:p.getLocale("sidebarMotto"),menu:[{text:"[".concat(p.getLocale("gamePaused"),"]"),action:""},{text:p.getLocale("levelsTitle"),action:function(){i.setCurrentPath("/main/levels")}}],fastLangSw:[{text:"eng",action:function(){p.currentLocale=0,i.setCurrentPath(i.getCurrentPath())}},{text:"ru",action:function(){p.currentLocale=1,i.setCurrentPath(i.getCurrentPath())}}]};this.sidebar.setData(e)}},{key:"showQuestion",value:function(e,t){t.getIsLocked()||(this.questionsNumbersList.setData({levelModel:t,questionNumber:e}),this.topBar.setData({title:"".concat(p.getLocale("levelTitle")," ").concat(t.getId()),isSmall:!0}),this.questionCardsContainer.setData({level:t,variantPopup:this.variantPopup,questionPopup:this.questionPopup,questionNumber:e}))}},{key:"resolve",value:function(e){var t=e.slice(1).split("/"),n=Number.parseInt(t[1],10),a=Number.parseInt(t[3],10);if("level"===t[0])if(4===t.length&&"question"===t[2])this.showQuestion(a,ce.getById(n));else if(2===t.length){var r=le.getLastWithAnswerByLevelId(n),o=null!=r?r.getNumber():0;o>=10?o=1:o+=1,i.setCurrentPath("/game/level/".concat(n,"/question/").concat(o))}this.generateSidebarData(),this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.sidebar.hide()}}])&&Le(t.prototype,n),a&&Le(t,a),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Pe(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.className=t,this.rootEl=document.getElementsByClassName(t)[0],this.userSettings=new n,this.router=new s,this.mainController=new he(this.rootEl),this.gameController=new Te(this.rootEl)}var t,a,r;return t=e,(a=[{key:"run",value:function(){this.router.addRoute("/main",this.mainController),this.router.addRoute("/game",this.gameController),V.isNotEmpty()?i.getRealCurrentPath()&&""!==i.getRealCurrentPath()?i.setCurrentPath(i.getRealCurrentPath()):i.setCurrentPath("/main/levels"):fetch(B.getDefaultStaticJsonSrcPath()).then((function(e){return e.json()})).then((function(e){V.srcData=e,i.setCurrentPath("/main/levels")}))}}])&&Pe(t.prototype,a),r&&Pe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}())("app").run()}();