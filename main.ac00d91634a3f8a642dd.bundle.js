!function(){"use strict";function e(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class t{constructor(){e(this,"gameDifficulty",null),e(this,"soundLevel",null),e(this,"language",null),e(this,"userName",null),e(this,"auth",null)}getUserName(){return this.userName}setUserName(e){this.userName=e}getAuth(){return this.auth}setAuth(e){this.auth=e}getGameDifficulty(){return this.gameDifficulty}setGameDifficulty(e){let s=e;s<0&&(s=t.GameDifficulty.easy),s>3&&(s=t.GameDifficulty.nightmare),this.gameDifficulty=s}getSoundLevel(){return this.soundLevel}setSoundLevel(e){let t=e;t<0&&(t=0),t>100&&(t=100),this.soundLevel=t}getLanguage(){return this.language}setLanguage(e){let t=e;"eng"===e&&"ru"===e||(t="eng"),this.language=t}toJSON(){return JSON.stringify({gameDifficulty:this.gameDifficulty,soundLevel:this.soundLevel,language:this.language})}fromJsonObj(e){this.gameDifficulty=e.gameDifficulty,this.soundLevel=e.soundLevel,this.language=e.language}}function s(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}e(t,"GameDifficulty",{easy:0,normal:1,hard:2,nightmare:3});class a{static setCurrentPath(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.path=e,window.location.hash=e,a.callbacksArray.forEach((s=>{s(e,t)}))}static getCurrentPath(){return a.path}static getRealCurrentPath(){return window.location.hash.slice(1)}static addPathChangeListener(e){a.callbacksArray.push(e)}}s(a,"data",{}),s(a,"path",null),s(a,"callbacksArray",[]);class i{constructor(){var e,t,s;s=[],(t="routes")in(e=this)?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,window.addEventListener("hashchange",(()=>{window.location.hash.slice(1)!==a.getCurrentPath()&&a.setCurrentPath(window.location.hash.slice(1))}),!1),a.addPathChangeListener(((e,t)=>{this.resolve(e,t)}))}resolve(e,t){this.routes.forEach((s=>{s.path===`/${e.split("/")[1]}`&&s.controller.resolve(e.replace(s.path,""),t)}))}addRoute(e,t){this.routes.push({path:e,controller:t})}}class n{constructor(e){this.data=e,this.isHidden=!1,this.rootEl=document.createElement("div"),this.rootEl.classList.add("sidebar"),this.sidebarContainer=document.createElement("div"),this.sidebarContainer.classList.add("sidebar__container"),this.buttonClose=document.createElement("div"),this.buttonClose.classList.add("button-close"),this.sidebarVerticalSeparator=document.createElement("div"),this.sidebarVerticalSeparator.classList.add("sidebar__vertical-separator"),this.mainMenuList=document.createElement("div"),this.mainMenuList.classList.add("main-menu__list"),this.fastLangSwitch=document.createElement("div"),this.fastLangSwitch.classList.add("main-menu__fast-lang-sw","fast-lang-sw"),this.rootEl.append(this.sidebarContainer)}setData(e){this.data=e,this.sidebarContainer.innerHTML="",this.mainMenu=document.createElement("div"),this.mainMenu.classList.add("sidebar__main-menu","main-menu"),this.mainMenuList.innerHTML="",this.data.menu.forEach((e=>{const t=document.createElement("button");t.classList.add("main-menu__list-button"),t.textContent=e.text,t.onclick=e.action,this.mainMenuList.append(t)})),this.sidebarVerticalSeparator.innerHTML="";const t=document.createElement("span");t.innerText=this.data.separatortext;for(let e=0;e<10;e+=1)this.sidebarVerticalSeparator.append(t.cloneNode(!0));this.fastLangSwitch.innerHTML="",this.data.fastlangsw.forEach((e=>{const t=document.createElement("button");t.classList.add("fast-lang-sw__lang-button"),t.textContent=e.text,t.onclick=e.action,this.fastLangSwitch.append(t)})),this.mainMenu.append(this.buttonClose),this.mainMenu.append(this.mainMenuList),this.mainMenu.append(this.fastLangSwitch),this.sidebarContainer.appendChild(this.sidebarVerticalSeparator),this.sidebarContainer.appendChild(this.mainMenu)}render(){return this.rootEl}hide(){this.rootEl.classList.add("sidebar_hidden"),this.isHidden=!0}show(){this.rootEl.classList.remove("sidebar_hidden"),this.isHidden=!1}}class r{constructor(){this.dataPalaceholder={title:"Art-Quiz.",isSmall:!1},this.rootEl=document.createElement("div"),this.rootEl.classList.add("top-bar"),this.menuButton=document.createElement("div"),this.menuButton.classList.add("burger-menu"),this.title=document.createElement("div"),this.title.classList.add("top-bar__title"),this.rootEl.appendChild(this.menuButton),this.rootEl.appendChild(this.title)}setData(e){e&&Object.keys(e).length>=1?this.data=e:this.data=this.dataPalaceholder,this.title.textContent=this.data.title,this.data.isSmall&&this.rootEl.classList.add("top-bar_s")}render(){return this.rootEl}}function o(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class l{static getLocale(e){return l.locales[l.currentLocale][e]}}o(l,"currentLocale",0),o(l,"locales",[{localeName:"eng",title:"ArtQuiz",levelTitle:"Level",settingsTitle:"Settings",levelsTitle:"Levels",scoreTitle:"Score",aboutTitle:"About",sidebarMoto:"CREATE TEST DEPLOY BE SMART",levelLockedTitle:"Locked",levelStatsTitle:"Done",gamePaused:"Paused",gameQuestionType1:"Who wrote this picture?",gameQuestionType2:"Which one is written by",gameSelectTitle:"Select",gameCancelTitle:"Cancel",gameAnswerCorrect:"Correct",gameAnswerUncorrect:"Uncorrect",gameNextButtonTitle:"Next",gamePictureNameTitle:"This is:",gameMadeByTitle:"Made by:",gameYearTitle:"Year of creation:"},{localeName:"ru",title:"ArtQuiz",levelTitle:"Уровень",settingsTitle:"Настройки",levelsTitle:"Уровни",scoreTitle:"Счёт",aboutTitle:"О игре",sidebarMoto:"СОЗДАВАЙ ТЕСТИРУЙ РАЗВОРАЧИВАЙ БУДЬ УМЁН",levelLockedTitle:"Заблокировано",levelStatsTitle:"Отвечено",gamePaused:"Пауза",gameQuestionType1:"Кто написал эту кртину?",gameQuestionType2:"Какую из картин написал автор",gameSelectTitle:"Выбрать",gameCancelTitle:"Отмена",gameAnswerCorrect:"Правильно",gameAnswerUncorrect:"Неправильно",gameNextButtonTitle:"Далее",gamePictureNameTitle:"Картина называется:",gameMadeByTitle:"Написана автором:",gameYearTitle:"Год создания:"}]);class c{constructor(e){this.dataPalaceholder={id:-1,imgSrc:"static/img/jpg/square/0.jpg",isLocked:!1,text:""},this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-card"),this.rootEl.classList.add("level-list__card"),this.imageContainer=document.createElement("div"),this.imageContainer.classList.add("level-card__image"),this.imageEl=document.createElement("img"),this.imageContainer.append(this.imageEl),this.levelText=document.createElement("div"),this.levelText.classList.add("level-card__text"),this.levelTitle=document.createElement("div"),this.levelTitle.classList.add("level-card__level-name"),this.levelStats=document.createElement("div"),this.levelStats.classList.add("level-card__level-stats"),this.levelText.append(this.levelTitle),this.levelText.append(this.levelStats),this.rootEl.append(this.imageContainer),this.rootEl.append(this.levelText),this.setData(e)}setData(e){e&&Object.keys(e).length>=1&&(this.data=e,this.imageEl.src=this.data.getImageSrc(),this.imageEl.alt=`${l.getLocale("levelTitle")} ${this.data.getId()}`,this.levelTitle.textContent=`${l.getLocale("levelTitle")} ${this.data.getId()}`,this.levelStats.textContent=this.data.getIsLocked()?l.getLocale("levelLockedTitle"):`${l.getLocale("levelStatsTitle")} ${this.data.getQuestionsAnsweredNumber()}/${this.data.getQuestionsNumber()}`,this.data.getIsLocked()&&this.rootEl.classList.add("level-card_locked"))}render(){return this.rootEl}}class d{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("level-list"),this.levelsList=[]}setData(e){e&&(this.levelsList=[],this.rootEl.innerHTML="",e.levelsList.forEach((e=>{const t=new c;t.setData(e),this.levelsList.push(t),e.getIsLocked()||(t.render().onclick=()=>{a.setCurrentPath(`/game/level/${e.getId()}`)}),this.rootEl.append(t.render())})))}render(){return this.rootEl}}class u{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("score-list"),this.rootEl.innerText="Score"}render(){return this.rootEl}}class h{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("settings"),this.rootEl.innerText="Settings"}render(){return this.rootEl}}class m{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("about"),this.rootEl.innerText="About"}render(){return this.rootEl}}class g{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("loading"),this.rootEl.innerText="Loading..."}render(){return this.rootEl}}function p(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class v{static getDefaultStaticSquareImagesPath(){return v.defaultStaticSquareImagesPath}static getDefaultStaticFullImagesPath(){return v.defaultStaticFullImagesPath}static getDefaultStaticJsonSrcPath(){return v.defaultStaticJsonSrcPath}static getQuestionsPerLevel(){return v.questionsPerLevel}}function L(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}p(v,"questionsPerLevel",10),p(v,"defaultStaticSquareImagesPath","static/img/jpg/square/"),p(v,"defaultStaticFullImagesPath","static/img/jpg/full/"),p(v,"defaultStaticJsonSrcPath","static/json/imagesTranslated.json");class E{static getData(){const e=localStorage.getItem(E.localStorageItemName);if(E.isNotEmpty()){const t=JSON.parse(e);return Object.keys(t).length>0?t:null}const t=E.generateData();return E.setData(t),t}static destroy(){localStorage.removeItem(E.localStorageItemName)}static isNotEmpty(){const e=localStorage.getItem(E.localStorageItemName);return e&&"{"===e[0]}static setData(e){localStorage.setItem(E.localStorageItemName,JSON.stringify(e))}static generateData(){const e=(e,t)=>{const s=Math.ceil(e),a=Math.floor(t);return Math.floor(Math.random()*(a-s+1))+s};localStorage.removeItem(E.localStorageItemName);let t=0,s=0,a=0,i=1;const n=v.getDefaultStaticSquareImagesPath(),r=v.getQuestionsPerLevel(),o={settings:{},gameDB:{level:[],question:[],answer:[],userAnswer:[]}};return E.srcData.data.forEach(((l,c,d)=>{c%r==0&&(c>=r&&(t+=1),o.gameDB.level.push({id:t,imageSrc:`${n}${l.imageId}.jpg`,isLocked:t>=2,text:""})),o.gameDB.question.push({id:s,levelId:t,number:i,questionType:e(1,2),correctAnswerId:a,imageSrc:`${n}${l.imageId}.jpg`,text:""}),o.gameDB.answer.push({id:a,questionId:s,imageSrc:`${n}${l.imageId}.jpg`,text:"",name:l.name,author:l.author,year:l.year}),a+=1;const u=[],h=[];for(let t=0;t<3;t+=1){let t=e(0,d.length-1);for(;-1!==h.findIndex((e=>e===t));)t=e(0,d.length-1);h.push(t),u.push({id:a,questionId:s,imageSrc:`${n}${d[t].imageId}.jpg`,text:"",name:d[t].name,author:d[t].author,year:d[t].year}),a+=1}u.forEach((e=>o.gameDB.answer.push(e))),s+=1,i=i<r?i+=1:1})),o}}function w(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}L(E,"localStorageItemName","art-quiz-game-data"),L(E,"srcData",null);class b{constructor(e){w(this,"id",-1),w(this,"imageSrc",null),w(this,"text",null),w(this,"isLocked",!0),w(this,"questions",null),this.id=e}getImageSrc(){return this.imageSrc}setImageSrc(e){this.imageSrc=e}getId(){return this.id}getQuestions(){return this.questions}setQuestions(e){this.questions=e}getText(){return this.text}setText(e){this.text=e}getIsLocked(){return this.isLocked}setIsLocked(e){this.isLocked=e}getQuestionsNumber(){return this.questions.length}getQuestionsAnsweredNumber(){return this.questions.filter((e=>null!==e.userAnswer)).length}}function T(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class S{constructor(e,t){T(this,"id",-1),T(this,"levelId",-1),T(this,"number",void 0),T(this,"questionType",null),T(this,"answers",null),T(this,"correctAnswerId",-1),T(this,"userAnswer",null),T(this,"imageSrc",null),T(this,"text",null),this.id=e,this.levelId=t}getLevelId(){return this.levelId}setLevelId(e){this.levelId=e}getId(){return this.id}getNumber(){return this.number}setNumber(e){this.number=e}getImageSrc(){return this.imageSrc}setImageSrc(e){this.imageSrc=e}getText(){return this.text}setText(e){this.text=e}getQuestionType(){return this.questionType}setQuestionType(e){this.questionType=e}getAnswers(){return this.answers}setAnswers(e){this.answers=e}getCorrectAnswerId(){return this.correctAnswerId}setCorrectAnswerId(e){this.correctAnswerId=e}getUserAnswer(){return this.userAnswer}setUserAnswer(e){this.userAnswer=e}isUserAnswerCorrect(){return this.userAnswer.answerId&&this.userAnswer.answerId===this.correctAnswerId}}function I(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}T(S,"QuestionTypes",{Whois:1,WhichIs:2});class f{constructor(e){I(this,"id",-1),I(this,"questionId",-1),I(this,"imageSrc",null),I(this,"author",null),I(this,"name",null),I(this,"year",null),this.id=e}getQuestionId(){return this.questionId}setQuestionId(e){this.questionId=e}getId(){return this.id}getImageSrc(){return this.imageSrc}setImageSrc(e){this.imageSrc=e}getAuthor(){return this.author}setAuthor(e){this.author=e}getName(){return this.name}setName(e){this.name=e}getYear(){return this.year}setYear(e){this.year=e}}class C{static dataToModel(e){const t=new f(e.id);return t.setQuestionId(e.questionId),t.setImageSrc(e.imageSrc),t.setName(e.name),t.setAuthor(e.author),t.setYear(e.year),t}static getAllByQuestionId(e){return E.getData().gameDB.answer.filter((t=>t.questionId===e)).map((e=>C.dataToModel(e)))}}function q(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class _{constructor(e){q(this,"id",-1),q(this,"answerId",-1),q(this,"questionId",-1),q(this,"thinkingTime",null),q(this,"answerDate",null),this.id=e}getId(){return this.id}getQuestionId(){return this.questionId}setQuestionId(e){this.questionId=e}getAnswerId(){return this.answerId}setAnswerId(e){this.answerId=e}getAnswerDate(){return this.answerDate}setAnswerDate(e){this.answerDate=e}getThinkingTime(){return this.thinkingTime}setThinkingTime(e){this.thinkingTime=e}}class P{static dataToModel(e){const t=new _(e.id);return t.setAnswerId(e.answerId),t.setQuestionId(e.questionId),t.setThinkingTime(e.thinkingTime),t.setAnswerDate(e.answerDate),t}static getByQuestionId(e){const t=E.getData().gameDB.userAnswer.filter((t=>t.questionId===e));let s=null;return t&&t.length>0&&(s=t.map((e=>P.dataToModel(e)))),s}}class y{static dataToModel(e){const t=new S(e.id),s=C.getAllByQuestionId(e.id);return t.setNumber(e.number),t.setLevelId(e.levelId),t.setQuestionType(e.questionType),t.setCorrectAnswerId(e.correctAnswerId),t.setImageSrc(e.imageSrc),t.setText(e.text),t.setAnswers(s),t.setUserAnswer(P.getByQuestionId(e.id)),t}static getAllByLevelId(e){let t=null;return t=E.getData().gameDB.question.filter((t=>t.levelId===e)),t.map((e=>y.dataToModel(e)))}}class D{static dataToModel(e){const t=new b(e.id),s=y.getAllByLevelId(e.id);return t.setImageSrc(e.imageSrc),t.setText(e.text),t.setIsLocked(e.isLocked),t.setQuestions(s),t}static getAll(){let e=null;return e=E.getData().gameDB.level,e.map((e=>D.dataToModel(e)))}static getById(e){let t=null;t=E.getData().gameDB.level.filter((t=>t.id===parseInt(e,10)));let s=null;return t&&t.length>0&&(s=t.map((e=>D.dataToModel(e)))[0]),s}}class x{constructor(e){this.parentElement=e,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.sidebar=new n,this.generateSidebarData(),this.page=document.createElement("div"),this.page.classList.add("main-page"),this.topBar=new r,this.topBar.setData({title:`${l.getLocale("levelsTitle")}.`}),this.topBarEl=this.topBar.render(),this.levelsListView=new d,this.scoreView=new u,this.settingsView=new h,this.aboutView=new m,this.loadingView=new g,this.currentView=this.loadingView.render(),this.page.append(this.topBarEl),this.page.append(this.currentView),this.rootEl.append(this.sidebar.render()),this.sidebar.hide(),this.rootEl.append(this.page),this.sidebar.buttonClose.onclick=()=>{this.sidebar.hide()},this.topBar.menuButton.onclick=()=>{this.sidebar.show()}}generateSidebarData(){const e={separatortext:l.getLocale("sidebarMoto"),menu:[{text:l.getLocale("levelsTitle"),action:()=>{a.setCurrentPath("/main/levels")}},{text:l.getLocale("scoreTitle"),action:()=>{a.setCurrentPath("/main/score")}},{text:l.getLocale("settingsTitle"),action:()=>a.setCurrentPath("/main/settings")},{text:l.getLocale("aboutTitle"),action:()=>a.setCurrentPath("/main/about")}],fastlangsw:[{text:"eng",action:()=>{l.currentLocale=0,a.setCurrentPath(a.getCurrentPath())}},{text:"ru",action:()=>{l.currentLocale=1,a.setCurrentPath(a.getCurrentPath())}}]};this.sidebar.setData(e)}viewLevels(){this.levelsListView.setData({levelsList:D.getAll()}),this.currentView=this.levelsListView.render(),this.topBar.setData({title:`${l.getLocale("levelsTitle")}.`}),this.generateSidebarData()}viewSettings(){this.currentView=this.settingsView.render(),this.topBar.setData({title:`${l.getLocale("settingsTitle")}.`}),this.generateSidebarData()}viewScore(){this.levelsListView.setData({levelsList:D.getAll()}),this.currentView=this.scoreView.render(),this.topBar.setData({title:`${l.getLocale("scoreTitle")}.`}),this.generateSidebarData()}viewAbout(){this.currentView=this.aboutView.render(),this.topBar.setData({title:`${l.getLocale("aboutTitle")}.`}),this.generateSidebarData()}loading(){this.currentView=this.loadingView.render(),this.page.append(this.currentView)}resolve(e){this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.page.innerHTML="";let t=!1;switch(e.slice(1)){case"levels":this.viewLevels();break;case"settings":this.viewSettings();break;case"about":this.viewAbout();break;case"score":this.viewScore();break;case"loading":this.loading(),t=!0}t||(this.page.append(this.topBarEl),this.page.append(this.currentView),this.sidebar.hide())}}class A{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("questions-numers-list")}setData(e){this.rootEl.innerHTML="",e.getQuestions().forEach(((e,t,s)=>{const a=document.createElement("div");a.classList.add("questions-numers-list__item");const i=document.createElement("p");i.innerText=e.getNumber(),e.getUserAnswer()?e.getIsUserAnswerCorrect()?a.classList.add("questions-numers-list__item_correct"):a.classList.add("questions-numers-list__item_uncorrect"):!(s[t-1]&&s[t-1].userAnswer||0===t)||s[t+1]&&s[t+1].userAnswer||a.classList.add("questions-numers-list__item_active"),a.append(i),this.rootEl.append(a)}))}render(){return this.rootEl}}class N{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.buttonSelect=document.createElement("button"),this.buttonSelect.classList.add("variant-popup__button"),this.buttonSelect.classList.add("variant-popup__button_select"),this.buttonSelect.textContent=l.getLocale("gameSelectTitle"),this.buttonCancel=document.createElement("button"),this.buttonCancel.classList.add("variant-popup__button"),this.buttonCancel.classList.add("variant-popup__button_cancel"),this.buttonCancel.textContent=l.getLocale("gameCancelTitle"),this.buttonCancel.onclick=()=>this.hide(),this.variantButtons=document.createElement("div"),this.variantButtons.classList.add("variant-popup__buttons"),this.variantButtons.append(this.buttonCancel),this.variantButtons.append(this.buttonSelect),this.downloadButton=document.createElement("button"),this.downloadButton.classList.add("variant-popup__download-button")}setData(e){const{answer:t}=e,{question:s}=e,{questionPopup:a}=e,i=document.createElement("div");i.classList.add("variant-popup");const n=document.createElement("div");n.classList.add("variant-popup__image");const r=document.createElement("img");r.src=t.getImageSrc(),r.alt="variant",n.append(r),n.append(this.downloadButton),i.append(n),i.append(this.variantButtons),this.rootEl.innerHTML="",this.rootEl.append(i),this.buttonSelect.onclick=()=>{this.hide(),a.setData({question:s,answer:t}),a.show()}}hide(){this.rootEl.classList.add("overlay_hidden")}show(){this.rootEl.classList.remove("overlay_hidden")}render(){return this.rootEl}}class B{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("overlay"),this.rootEl.classList.add("overlay_blur"),this.popupContainer=document.createElement("div"),this.popupContainer.classList.add("question-popup"),this.buttonNext=document.createElement("button"),this.buttonNext.classList.add("question-popup__button"),this.rootEl.append(this.popupContainer)}setData(e){const{answer:t}=e,{question:s}=e,a=document.createElement("div");a.classList.add("question-popup__result"),this.buttonNext.textContent=l.getLocale("gameNextButtonTitle");const i=document.createElement("div");if(i.classList.add("question-popup__result-description"),s.getCorrectAnswerId()===t.getId()){a.innerText=l.getLocale("gameAnswerCorrect");const e=document.createElement("div");e.classList.add("question-popup__desc-pair"),e.innerText=l.getLocale("gamePictureNameTitle");const s=document.createElement("p");s.innerText=`"${t.getName()[l.getLocale("localeName")]}"`,e.append(s);const n=document.createElement("div");n.classList.add("question-popup__desc-pair"),n.innerText=l.getLocale("gameMadeByTitle");const r=document.createElement("p");r.innerText=t.getAuthor()[l.getLocale("localeName")],n.append(r);const o=document.createElement("div");o.classList.add("question-popup__desc-pair"),o.innerText=l.getLocale("gameYearTitle");const c=document.createElement("p");c.innerText=t.getYear(),o.append(c),i.append(e),i.append(n),i.append(o),a.classList.add("question-popup__result_correct")}else a.innerText=l.getLocale("gameAnswerUncorrect"),a.classList.add("question-popup__result_uncorrect");this.popupContainer.innerHTML="",this.popupContainer.append(a),this.popupContainer.append(i),this.popupContainer.append(this.buttonNext)}hide(){this.rootEl.classList.add("overlay_hidden")}show(){this.rootEl.classList.remove("overlay_hidden")}render(){return this.rootEl}}class Q{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-card")}setData(e){const{question:t}=e.question,s=e=>{const t=[...e];for(let e=t.length-1;e>0;e-=1){const s=Math.floor(Math.random()*(e+1)),a=t[e];t[e]=t[s],t[s]=a}return t};if(t.getQuestionType()===S.QuestionTypes.Whois){this.rootEl.classList.add("question-whois");const a=document.createElement("div");a.classList.add("question-card__question");const r=document.createElement("div");r.classList.add("question-card__image");const o=document.createElement("img");o.src=t.getImageSrc(),o.alt=l.getLocale("gameQuestionType1");const c=document.createElement("div");c.classList.add("question-card__title"),c.innerText=l.getLocale("gameQuestionType1");const d=document.createElement("div");d.classList.add("question-card_answers-grid");s((i=t.getAnswers(),n=e,i.map((e=>{const{questionPopup:t}=n,s=document.createElement("div");return s.classList.add("question-card_answer"),s.innerText=e.getAuthor()[l.getLocale("localeName")],s.onclick=()=>{t.setData({answer:e,question:n.question}),t.show()},s})))).forEach((e=>d.append(e))),r.append(o),a.append(r),a.append(c),this.rootEl.append(a),this.rootEl.append(d)}else if(t.getQuestionType()===S.QuestionTypes.WhichIs){this.rootEl.classList.add("question-which");const a=document.createElement("div");a.classList.add("question-which_answers-grid");const i=((e,t)=>e.map((e=>{const{variantPopup:s}=t,a=document.createElement("div");a.classList.add("question-which_answer");const i=document.createElement("img");return i.alt=l.getLocale("gameQuestionType2"),i.src=e.getImageSrc(),a.onclick=()=>{s.setData({answer:e,question:t.question,questionPopup:t.questionPopup}),s.show()},a.append(i),a})))(t.getAnswers(),e);s(i).forEach((e=>a.append(e)));const n=document.createElement("div");n.classList.add("question-which__question");const r=document.createElement("div");r.classList.add("question-which__title");const o=t.getAnswers().filter((e=>e.getId()===t.getCorrectAnswerId()))[0];r.innerHTML=`${l.getLocale("gameQuestionType2")}<b>${o.getAuthor()[l.getLocale("localeName")]}?</b>`,n.append(r),this.rootEl.append(a),this.rootEl.append(n)}var i,n;e.questionPopup.buttonNext.onclick=()=>{if(e.questionPopup.hide(),t.getNumber()<v.getQuestionsPerLevel()){const e=`/game/level/${t.getLevelId()}/question/${parseInt(t.getNumber(),10)+1}`;a.setCurrentPath(e)}}}hide(){this.rootEl.classList.add("question-card_hidden")}setActive(){this.rootEl.classList.add("question-card_active")}render(){return this.rootEl}}class M{constructor(){this.rootEl=document.createElement("div"),this.rootEl.classList.add("question-cards-container"),this.rootEl.innerText="Questions here"}setData(e){this.rootEl.innerHTML="";const t=new Q,s=e.level.getQuestions().filter((t=>t.getNumber()===parseInt(e.questionNumber,10)))[0];t.setData({question:s,variantPopup:e.variantPopup,questionPopup:e.questionPopup}),this.rootEl.appendChild(t.render())}hide(){this.rootEl.classList.remove("game-question-page_hidden")}render(){return this.rootEl}}class k{constructor(e){this.parentElement=e,this.rootEl=document.createElement("div"),this.rootEl.classList.add("container"),this.questionCardsContainer=new M,this.gameQuestionsPage=document.createElement("div"),this.gameQuestionsPage.classList.add("game-question-page"),this.headerContainer=document.createElement("div"),this.headerContainer.classList.add("header-container"),this.topBar=new r,this.topBar.setData({title:`${l.getLocale("levelTitle")} 0`,isSmall:!0}),this.sidebar=new n,this.generateSidebarData(),this.sidebar.hide(),this.variantPopup=new N,this.variantPopup.hide(),this.questionPopup=new B,this.questionPopup.hide(),this.questionsNumbersList=new A,this.headerContainer.append(this.topBar.render()),this.headerContainer.append(this.questionsNumbersList.render()),this.gameQuestionsPage.append(this.headerContainer),this.gameQuestionsPage.append(this.questionCardsContainer.render()),this.gameQuestionsPage.append(this.variantPopup.render()),this.gameQuestionsPage.append(this.questionPopup.render()),this.rootEl.append(this.sidebar.render()),this.rootEl.append(this.gameQuestionsPage),this.sidebar.buttonClose.onclick=()=>{this.sidebar.hide()},this.topBar.menuButton.onclick=()=>{this.sidebar.show()}}generateSidebarData(){const e={separatortext:l.getLocale("sidebarMoto"),menu:[{text:`[${l.getLocale("gamePaused")}]`,action:""},{text:l.getLocale("levelsTitle"),action:()=>{a.setCurrentPath("/main/levels")}}],fastlangsw:[{text:"eng",action:()=>{l.currentLocale=0,a.setCurrentPath(a.getCurrentPath())}},{text:"ru",action:()=>{l.currentLocale=1,a.setCurrentPath(a.getCurrentPath())}}]};this.sidebar.setData(e)}showQuestion(e,t){t.getIsLocked()||(this.questionsNumbersList.setData(t),this.topBar.setData({title:`${l.getLocale("levelTitle")} ${t.getId()}`,isSmall:!0}),this.questionCardsContainer.setData({level:t,variantPopup:this.variantPopup,questionPopup:this.questionPopup,questionNumber:e}))}resolve(e){const t=e.slice(1).split("/");"level"===t[0]&&(4===t.length&&"question"===t[2]?this.showQuestion(t[3],D.getById(t[1])):2===t.length&&a.setCurrentPath(`/game/level/${t[1]}/question/1`)),this.generateSidebarData(),this.parentElement.innerHTML="",this.parentElement.append(this.rootEl),this.sidebar.hide()}}new class{constructor(e){this.className=e,this.rootEl=document.getElementsByClassName(e)[0],this.userSettings=new t,this.router=new i,this.mainController=new x(this.rootEl),this.gameController=new k(this.rootEl)}run(){this.router.addRoute("/main",this.mainController),this.router.addRoute("/game",this.gameController),E.isNotEmpty()?a.getRealCurrentPath()&&""!==a.getRealCurrentPath()?a.setCurrentPath(a.getRealCurrentPath()):a.setCurrentPath("/main/levels"):fetch(v.getDefaultStaticJsonSrcPath()).then((e=>e.json())).then((e=>{E.srcData=e,a.setCurrentPath("/main/levels")}))}}("app").run()}();